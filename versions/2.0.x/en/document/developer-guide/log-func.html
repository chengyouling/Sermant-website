<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Logging Function | Sermant</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/versions/2.0.x/img/logo.svg">
    <meta name="description" content="A Proxyless Service Mesh based on Bytecode Enhancement">
    
    <link rel="preload" href="/versions/2.0.x/assets/css/0.styles.1e0e659a.css" as="style"><link rel="preload" href="/versions/2.0.x/assets/js/app.d827361b.js" as="script"><link rel="preload" href="/versions/2.0.x/assets/js/3.06f127bc.js" as="script"><link rel="preload" href="/versions/2.0.x/assets/js/1.c8bacf5b.js" as="script"><link rel="preload" href="/versions/2.0.x/assets/js/31.5a0cda15.js" as="script"><link rel="prefetch" href="/versions/2.0.x/assets/js/10.11126491.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/100.fe565a9f.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/101.75a964a5.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/102.e1db2e67.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/103.38cb7212.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/104.53bd9de7.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/105.503c14a1.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/106.164f80b3.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/107.da9f194b.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/108.6f001d15.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/109.d0427332.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/11.592204d9.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/110.32bda31e.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/111.edd529db.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/112.f8a19c7e.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/113.feeb9cc6.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/114.686320db.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/115.6145b589.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/12.fd6a031f.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/13.7427e98b.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/14.199c38f6.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/15.900a8374.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/16.dc00a508.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/17.7bb9b1f6.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/18.0cb1c621.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/19.c4a6998b.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/20.bac96cfe.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/21.f3cbb9a3.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/22.9fae982b.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/23.80aecc10.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/24.d862bfe2.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/25.d2bfc810.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/26.d0314cb9.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/27.cb41d5d9.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/28.44ffc507.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/29.13f93e12.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/30.0da55062.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/32.091bfc64.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/33.56d800c8.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/34.d8960a15.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/35.ed0f721e.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/36.f4ab3b29.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/37.1d6019dc.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/38.6f11668f.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/39.d8101f9f.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/4.7add7152.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/40.46d066a6.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/41.0daeaebd.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/42.d220a2de.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/43.d8850573.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/44.ef4e02ab.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/45.cb46aba8.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/46.5362eeb2.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/47.706a7dbb.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/48.098a121c.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/49.35aec486.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/5.4a333fb7.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/50.24f70d22.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/51.323b9617.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/52.42c3e36e.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/53.4d4b62c4.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/54.910bbc3e.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/55.de87de68.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/56.dc709143.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/57.a0e4792b.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/58.3b83140b.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/59.255861a7.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/6.72029eac.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/60.f1229caf.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/61.c00aff9b.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/62.4125fce4.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/63.2f37913f.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/64.ba4db5b6.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/65.5917e76d.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/66.09551816.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/67.6bbfea50.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/68.52a8cabe.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/69.7368563e.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/7.698dd478.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/70.3a458cd8.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/71.4dc51d53.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/72.9490e30b.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/73.9afc2fcf.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/74.6b62d369.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/75.706e72f2.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/76.fcbe5122.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/77.3bafe1cd.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/78.61a9dc3a.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/79.9e1e5534.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/8.10750ce9.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/80.a56d59b3.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/81.54948ff4.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/82.ff46e15b.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/83.3a4b5779.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/84.ad7f839f.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/85.d0ba9718.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/86.66fae153.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/87.4110e375.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/88.b69f94cf.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/89.a1e50555.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/9.7f57e4b0.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/90.a0b1cc93.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/91.53b725fa.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/92.244d2a4e.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/93.c55949d8.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/94.9cb9cb55.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/95.7ea12d39.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/96.28b0e957.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/97.630cfceb.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/98.540c61f8.js"><link rel="prefetch" href="/versions/2.0.x/assets/js/99.75106013.js">
    <link rel="stylesheet" href="/versions/2.0.x/assets/css/0.styles.1e0e659a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/versions/2.0.x/en/" class="home-link router-link-active"><img src="/versions/2.0.x/img/sermant-logo.png" alt="Sermant" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/versions/2.0.x/en/document/" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/versions/2.0.x/en/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/sermant-io/Sermant" target="_blank" class="nav-link external">
  Github
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/versions/2.0.x/zh/document/developer-guide/log-func.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/versions/2.0.x/en/document/developer-guide/log-func.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <div class="nav-item"><!----></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/versions/2.0.x/en/document/" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/versions/2.0.x/en/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/sermant-io/Sermant" target="_blank" class="nav-link external">
  Github
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/versions/2.0.x/zh/document/developer-guide/log-func.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/versions/2.0.x/en/document/developer-guide/log-func.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <div class="nav-item"><!----></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Start</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>User Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Plugin Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Developer Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/versions/2.0.x/en/document/developer-guide/" aria-current="page" class="sidebar-link">Create Your First Plugin</a></li><li><a href="/versions/2.0.x/en/document/developer-guide/bytecode-enhancement.html" class="sidebar-link">Bytecode Enhancement</a></li><li><a href="/versions/2.0.x/en/document/developer-guide/package-structure.html" class="sidebar-link">Plugin Structure</a></li><li><a href="/versions/2.0.x/en/document/developer-guide/plugin-configuration.html" class="sidebar-link">Plugin Configuration</a></li><li><a href="/versions/2.0.x/en/document/developer-guide/dynamic-config-func.html" class="sidebar-link">Dynamic Configuration Function</a></li><li><a href="/versions/2.0.x/en/document/developer-guide/sermant-xds-service.html" class="sidebar-link">xDS Service</a></li><li><a href="/versions/2.0.x/en/document/developer-guide/heartbeat-func.html" class="sidebar-link">Heartbeat Function</a></li><li><a href="/versions/2.0.x/en/document/developer-guide/trace-tracking-func.html" class="sidebar-link">Link Function</a></li><li><a href="/versions/2.0.x/en/document/developer-guide/log-func.html" aria-current="page" class="active sidebar-link">Logging Function</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/versions/2.0.x/en/document/developer-guide/log-func.html#function-introduction" class="sidebar-link">Function Introduction</a></li><li class="sidebar-sub-header"><a href="/versions/2.0.x/en/document/developer-guide/log-func.html#development-examples" class="sidebar-link">Development Examples</a></li><li class="sidebar-sub-header"><a href="/versions/2.0.x/en/document/developer-guide/log-func.html#api-configuration" class="sidebar-link">API &amp; Configuration</a></li></ul></li><li><a href="/versions/2.0.x/en/document/developer-guide/third-party-copyright.html" class="sidebar-link">Third Party Copyright Statement</a></li><li><a href="/versions/2.0.x/en/document/developer-guide/version-manage.html" class="sidebar-link">Version Management</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Community Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>FAQ</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="logging-function"><a href="#logging-function" class="header-anchor">#</a> Logging Function</h1> <p>This article describes how to use the logging system provided by Sermant in your development.</p> <h2 id="function-introduction"><a href="#function-introduction" class="header-anchor">#</a> Function Introduction</h2> <p>Log is an indispensable ability in program development, through the log can quickly find out the state of the program running and the problems encountered. <strong>Sermant</strong> log system is built on <strong>JUL</strong>&amp;<strong>logback</strong>, which provides a complete, flexible configuration log tool to avoid class conflicts for plugin development.</p> <blockquote><p>Note: Based on Sermant's class isolation strategy, the log system constructs the log through JUL interface and outputs the log through logback engine. This is due to the <a href="https://github.com/qos-ch/slf4j/tree/master/jul-to-slf4j" target="_blank" rel="noopener noreferrer">jul-to-slf4j<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> bridging capability, based on which you don't have to worry about logging configuration and output conflicts with the enhanced application.</p></blockquote> <h2 id="development-examples"><a href="#development-examples" class="header-anchor">#</a> Development Examples</h2> <p>This development example is based on the project created in the  <a href="/versions/2.0.x/en/document/developer-guide/" class="router-link-active">Create your first plugin</a>  document.</p> <p>Find <code>template\template-plugin</code> under <code>com.huaweicloud.sermant.template.TemplateDeclarer</code> class, in which define a private static constants <code>LOGGER</code>, used in the class of log structure:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span>Logger</span> <span class="token constant">LOGGER</span> <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then we are in for <code>main</code> method <a href="/versions/2.0.x/en/document/developer-guide/bytecode-enhancement.html#Interceptor">Interceptor</a> <code>before</code> and <code>after</code> method through <code>java.util.logging.Logger::info</code> interface added <code>INFO</code> level of execution This will allow us to see the interceptor execution in the log:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">ExecuteContext</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">ExecuteContext</span> context<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Say good morning before good afternoon!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Good morning!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> context<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">ExecuteContext</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token class-name">ExecuteContext</span> context<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Say good night after good afternoon!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Good night!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> context<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Once the development is complete, follow the <a href="/versions/2.0.x/en/document/developer-guide/#Packaged-build">Packaged build</a> process used to create the first plugin, run <strong>mvn package</strong> in the root directory of the project, and run <code>cd agent/</code> in it with <strong>Sermant</strong> to run the test app. Run <strong>java -javaagent:sermant-agent.jar -jar Application.jar</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">java</span> -javaagent:sermant-agent.jar <span class="token parameter variable">-jar</span> Application.jar
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Loading god library into BootstrapClassLoader.
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building argument map by agent arguments.
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Loading core library into SermantClassLoader.
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Loading sermant agent, artifact is: default
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Load sermant done, artifact is: default
Good morning<span class="token operator">!</span>
Good afternoon<span class="token operator">!</span>
Good night<span class="token operator">!</span>
</code></pre></div><p>The execution logic defined in the plug-in has been enhanced into the test application. Next, take a look at the logs generated while the program is running:</p> <ol><li><p>Enter the log directory by running <code>cd logs/sermant/core/app/${yyyy-mm-dd}/</code>, where <code>${yyyy-mm-dd}</code> refers to the directory name generated by the runtime based on the date.</p></li> <li><p>Open the log file <code>sermant-0.log</code> to check the log content. We can see that the log we constructed has taken effect, and we can see the trigger time, log level, class, method, line of code, thread and other information in the log, which is easy to understand the running state of the program.</p></li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>xxxx-xx-xx xx:xx:xx.xxx <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>com.huaweicloud.sermant.template.TemplateDeclarer<span class="token variable">$1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>before:33<span class="token punctuation">]</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> Say good morning before good afternoon<span class="token operator">!</span>
xxxx-xx-xx xx:xx:xx.xxx <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>com.huaweicloud.sermant.template.TemplateDeclarer<span class="token variable">$1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>after:40<span class="token punctuation">]</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> Say good night after good afternoon<span class="token operator">!</span>
</code></pre></div><h2 id="api-configuration"><a href="#api-configuration" class="header-anchor">#</a> API &amp; Configuration</h2> <h3 id="api"><a href="#api" class="header-anchor">#</a> API</h3> <h4 id="get-logging-tools"><a href="#get-logging-tools" class="header-anchor">#</a> Get Logging Tools</h4> <ul><li>Get the logging tool object for constructing logs in development. The log instance is a <code>java.util.logging.Logger</code> instance, which has been initialized and bridged to the logback logging engine in the <strong>Sermant</strong> framework.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span>Logger</span> <span class="token constant">LOGGER</span> <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="logging"><a href="#logging" class="header-anchor">#</a> Logging</h4> <p>Developers can use the following logging interfaces to record various levels (<code>TRACE</code>, <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, <code>ERROR</code>) of execution to achieve different levels of monitoring.</p> <ul><li>Record <strong>TRACE</strong> level logs to trace detailed program execution flow. This level is off by default, but it needs to be configured if needed.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span>Logger</span> <span class="token constant">LOGGER</span> <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">finest</span><span class="token punctuation">(</span><span class="token string">&quot;TRACE MESSAGE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Logging at the <strong>DEBUG</strong> level, used to record details at key points in the application, possibly containing method arguments or return values, which can be used to learn more about the application during debugging. This level is off by default, but it needs to be configured if needed.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span>Logger</span> <span class="token constant">LOGGER</span> <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">fine</span><span class="token punctuation">(</span><span class="token string">&quot;DEBUG MESSAGE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Logging <strong>INFO</strong> level logs, used to record some critical information about the program execution, often to indicate where the program has entered or the state of the execution, often not like the detailed information recorded in <strong>DEBUG</strong> level logs.</li> <li></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span>Logger</span> <span class="token constant">LOGGER</span> <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;INFO MESSAGE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Log at the <strong>WARN</strong> level to log some warning messages. Some special states are entered during the running of the logger. Although they will not affect the running of the program, they are worth noting.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span>Logger</span> <span class="token constant">LOGGER</span> <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">&quot;WARN MESSAGE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>the record level of the <strong>ERROR</strong> log, to record the ERROR in the operation of the program, used to provide information to facilitate the development and maintenance personnel to understand the causes of ERROR.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span>Logger</span> <span class="token constant">LOGGER</span> <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">severe</span><span class="token punctuation">(</span><span class="token string">&quot;ERROR MESSAGE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h3> <p>The logging system provided by <strong>Sermant</strong> is based on the logback logging engine and follows logback's logging configuration style, based on the <a href="/versions/2.0.x/en/document/developer-guide/#Project-structure">Project structure</a> created in the first plugin, by modifying the <code>config/logback.xml</code> to customize the logging logic.</p> <h4 id="log-output-configuration"><a href="#log-output-configuration" class="header-anchor">#</a> Log Output Configuration</h4> <table><thead><tr><th>Configuration Items</th> <th>Description</th> <th>Example Configuration</th></tr></thead> <tbody><tr><td>log.home_dir</td> <td>Used to specify the final log output path.</td> <td><code>${sermant_log_dir:-./logs/sermant/core}</code></td></tr> <tr><td>log.app_name</td> <td>The filename prefix used to specify the log file.</td> <td><code>{sermant_app_name:-sermant}</code></td></tr> <tr><td>log.maxHistory</td> <td>Used to specify the maximum duration (in days) of the log file.</td> <td><code>${sermant_log_max_history:-30}</code></td></tr> <tr><td>log.level</td> <td>Used to specify the minimum level of log output, configurable <code>trace</code>、<code>debug</code>、<code>info</code>、<code>warn</code>、<code>error</code>。</td> <td><code>${sermant_log_level:-trace}</code></td></tr> <tr><td>log.maxSize</td> <td>Used to specify the maximum capacity of a single log file.</td> <td><code>${sermant_log_max_size:-5MB}</code></td></tr> <tr><td>log.totalSize</td> <td>Used to specify the maximum total capacity of the log file.</td> <td><code>${sermant_log_total_size:-20GB}</code></td></tr> <tr><td>log.pattern</td> <td>Used to specify the format of the output log.</td> <td><code>%d{yyyy-MM-dd HH:mm:ss.SSS} [%le] [%C] [%M:%L] [%thread] %m%n</code></td></tr></tbody></table> <blockquote><p>Note: All configuration values support reading the configuration from an environment variable, simply configure it as <code>${environment variable name:-default value}</code>. The format of the output log is configured in <a href="#Log-Format-Configuration">Log Format Configuration</a>.</p></blockquote> <h4 id="log-format-configuration"><a href="#log-format-configuration" class="header-anchor">#</a> Log Format Configuration</h4> <p>Log the default configuration for <code>%d{yyyy-MM-dd HH:mm:ss.SSS} [%le] [%C] [%M:%L] [%thread] %m%n</code> identification meaning which can be configured as follows:</p> <table><thead><tr><th>Configuring Identity</th> <th>Description</th></tr></thead> <tbody><tr><td>%d</td> <td>Used to specify the date format for log output.</td></tr> <tr><td>%C</td> <td>Use to specify the full class name of the class in which the log output occurred.</td></tr> <tr><td>%F</td> <td>The filename used to specify the log output class in which the log occurs.</td></tr> <tr><td>%M</td> <td>The name of the method used to specify the log output for which the log occurred.</td></tr> <tr><td>%L</td> <td>Line number used to specify the log output in the class where the log occurred.</td></tr> <tr><td>%thread</td> <td>Used to specify the log output thread on which the log occurred.</td></tr> <tr><td>%m</td> <td>Used to specify that the log outputs the information specified when the log was constructed.</td></tr> <tr><td>%n</td> <td>Newline characters</td></tr></tbody></table></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/14/2024, 8:47:31 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/versions/2.0.x/en/document/developer-guide/trace-tracking-func.html" class="prev">
        Link Function
      </a></span> <span class="next"><a href="/versions/2.0.x/en/document/developer-guide/third-party-copyright.html">
        Third Party Copyright Statement
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/versions/2.0.x/assets/js/app.d827361b.js" defer></script><script src="/versions/2.0.x/assets/js/3.06f127bc.js" defer></script><script src="/versions/2.0.x/assets/js/1.c8bacf5b.js" defer></script><script src="/versions/2.0.x/assets/js/31.5a0cda15.js" defer></script>
  </body>
</html>
