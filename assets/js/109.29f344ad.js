(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{555:function(t,a,s){"use strict";s.r(a);var n=s(26),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"sermant-agent使用手册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sermant-agent使用手册"}},[t._v("#")]),t._v(" Sermant Agent使用手册")]),t._v(" "),a("p",[t._v("Sermant Agent是提供字节码增强基础能力及各类服务治理能力的核心组件。"),a("RouterLink",{attrs:{to:"/zh/document/user-guide/"}},[t._v("Sermant使用介绍")]),t._v("中描述的产品目录"),a("code",[t._v("sermant-agent-x.x.x/agent")]),t._v("目录下内容即为Sermant Agent组件的各模块。Sermant Agent的主体为Sermant提供了字节码增强基础能力及开发框架，同时支持心跳功能、动态配置功能、日志功能、事件上报等公共基础能力，当前已支持"),a("code",[t._v("premain")]),t._v("和"),a("code",[t._v("agentmain")]),t._v("两种方式启动。")],1),t._v(" "),a("p",[t._v("Sermant Agent插件目录中则由各插件提供了标签路由、限流降级、双注册等服务治理能力，当前已支持在宿主服务运行时动态安装和卸载服务治理插件（需要插件支持动态安装和卸载）。")]),t._v(" "),a("h2",{attrs:{id:"支持版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持版本"}},[t._v("#")]),t._v(" 支持版本")]),t._v(" "),a("p",[t._v("Sermant Agent支持Linux、Windows，基于JDK 1.8开发，建议使用JDK 1.8版本及以上版本。")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://gitee.com/openeuler/bishengjdk-8",target:"_blank",rel:"noopener noreferrer"}},[t._v("HuaweiJDK 1.8"),a("OutboundLink")],1),t._v(" / "),a("a",{attrs:{href:"https://github.com/openjdk/jdk",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenJDK 1.8"),a("OutboundLink")],1),t._v(" / "),a("a",{attrs:{href:"https://www.oracle.com/java/technologies/downloads/",target:"_blank",rel:"noopener noreferrer"}},[t._v("OracleJDK 1.8"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"agent启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#agent启动"}},[t._v("#")]),t._v(" Agent启动")]),t._v(" "),a("h4",{attrs:{id:"premain方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#premain方式"}},[t._v("#")]),t._v(" premain方式")]),t._v(" "),a("p",[t._v("通过为宿主服务配置"),a("code",[t._v("-javaagent")]),t._v("指令来利用"),a("code",[t._v("premain")]),t._v("方式启动Sermant Agent ，基于"),a("RouterLink",{attrs:{to:"/zh/document/QuickStart.html"}},[t._v("快速开始")]),t._v("所构建环境，执行以下命令启动Sermant Agent:")],1),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# linux mac")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" -javaagent:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${path}")]),t._v("/sermant-agent-x.x.x/agent/sermant-agent.jar "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-jar")]),t._v(" spring-provider.jar\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# windows")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" -javaagent:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${path}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("sermant-agent-x.x.x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("sermant-agent.jar "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-jar")]),t._v(" spring-provider.jar\n")])])]),a("p",[t._v("查看"),a("code",[t._v("spring-provider.jar")]),t._v("的日志开头是否包含以下内容：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Loading god library into BootstrapClassLoader.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Building argument map by agent arguments.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Loading core library into SermantClassLoader.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Loading sermant agent, artifact is: default\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Load sermant done, artifact is: default\n")])])]),a("p",[t._v("若日志如上正常输出，则说明Sermant Agent启动成功，打开浏览器并导航到"),a("code",[t._v("http://localhost:8900")]),t._v("，可以看到已经有Sermant Agent实例，如下图所示效果：")]),t._v(" "),a("MyImage",{attrs:{src:"/docs-img/backend_sermant_info.jpg"}}),t._v(" "),a("h4",{attrs:{id:"agentmain方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#agentmain方式"}},[t._v("#")]),t._v(" agentmain方式")]),t._v(" "),a("ul",[a("li",[t._v("基于"),a("RouterLink",{attrs:{to:"/zh/document/QuickStart.html"}},[t._v("快速开始")]),t._v("所构建环境，首先启动宿主服务"),a("code",[t._v("spring-provider.jar")])],1)]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-jar")]),t._v(" spring-provider.jar\n")])])]),a("ul",[a("li",[t._v("通过"),a("code",[t._v("agentmain")]),t._v("方式启动，需要借助"),a("code",[t._v("Attach API")]),t._v("来完成，首先通过"),a("a",{attrs:{href:"#%E9%99%84%E4%BB%B6"}},[t._v("附件 AgentLoader.java")]),t._v("创建一个Java文件，通过javac编译：")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Linux、MacOS")]),t._v("\njavac "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-cp")]),t._v(" ./:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/tools.jar AgentLoader.java\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Windows 已正确配置JAVA所需环境变量")]),t._v("\njavac "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-cp")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%JAVA_HOME%\\lib'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[t._v("\\t")]),t._v('ools.jar"')]),t._v(" AgentLoader.java "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-encoding")]),t._v(" utf-8\n")])])]),a("ul",[a("li",[t._v("编译完成后，将在目录下生成"),a("code",[t._v("AgentLoader.class")]),t._v("文件，使用如下指令运行"),a("code",[t._v("AgentLoader")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Linux、MacOS")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-cp")]),t._v(" ./:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/tools.jar AgentLoader\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Windows 已正确配置JAVA所需环境变量")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" AgentLoader\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行指令根据所使用操作系统进行选择，此处以Linux、MacOS指令编写")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-cp")]),t._v(" ./:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/tools.jar AgentLoader\n请选择需要使用Sermant Agent的Java进程：\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(": xxxxx AgentLoader "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(": xxxxx spring-provider.jar "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(": xxxxx sermant-backend-1.2.0.jar "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n请输入需要使用Sermant Agent的Java进程序号：1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择spring-provider的进程序号")]),t._v("\n您选择的进程 ID 是：xxxxx "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n请输入Sermant Agent所在目录（默认采用该目录下sermant-agent.jar为入口）："),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${path}")]),t._v("/sermant-agent-x.x.x/agent "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 填充Sermant Agent所在目录")]),t._v("\n请输入向Sermant Agent传入的参数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("可为空，默认配置参数agentPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("： "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置Sermant Agent参数，此处可为空")]),t._v("\n")])])]),a("p",[t._v("按照指引填充完成后在"),a("code",[t._v("spring-provider.jar")]),t._v("日志中可以看到以下内容：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Loading god library into BootstrapClassLoader.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Building argument map by agent arguments.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Loading core library into SermantClassLoader.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Loading sermant agent, artifact is: default\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Load sermant done, artifact is: default\n")])])]),a("p",[t._v("若日志如上正常输出，则说明Sermant Agent读取启动指令成功并开始执行安装，打开浏览器并导航到"),a("code",[t._v("http://localhost:8900")]),t._v("，可以看到已经有Sermant Agent实例，如下图所示效果：")]),t._v(" "),a("MyImage",{attrs:{src:"/docs-img/sermant-agent-agentmain-start.png"}}),t._v(" "),a("h2",{attrs:{id:"agent卸载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#agent卸载"}},[t._v("#")]),t._v(" Agent卸载")]),t._v(" "),a("blockquote",[a("p",[t._v("注：为避免部分基于premain启动方式开发的服务治理能力在卸载时引发不可预知的异常，Sermant Agent对卸载进行限制，通过agentmain方式启动的Sermant Agent才支持卸载，通过premain方式启动的Sermant Agent不支持。")])]),t._v(" "),a("p",[t._v("在通过"),a("a",{attrs:{href:"#agentmain%E6%96%B9%E5%BC%8F"}},[t._v("agentmain方式")]),t._v("启动后，可以对Sermant Agent进行卸载，再次运行"),a("code",[t._v("AgentLoader")]),t._v("，并通过传入参数下发卸载Sermant Agent的指令"),a("code",[t._v("command=UNINSTALL-AGENT")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行指令根据所使用操作系统进行选择，此处以Linux、MacOS指令编写")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-cp")]),t._v(" ./:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/tools.jar AgentLoader\n请选择需要使用Sermant Agent的Java进程：\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(": xxxxx AgentLoader "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(": xxxxx spring-provider.jar "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(": xxxxx sermant-backend-1.2.0.jar "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n请输入需要使用Sermant Agent的Java进程序号：1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择spring-provider的进程序号")]),t._v("\n您选择的进程 ID 是：xxxxx "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n请输入Sermant Agent所在目录（默认采用该目录下sermant-agent.jar为入口）："),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${path}")]),t._v("/sermant-agent-x.x.x/agent "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 填充Sermant Agent所在目录")]),t._v("\n请输入向Sermant Agent传入的参数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("可为空，默认配置参数agentPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("：command"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("UNINSTALL-AGENT "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 此处通过传入参数下发卸载指令")]),t._v("\n")])])]),a("p",[t._v("按照指引填充完成后在"),a("code",[t._v("spring-provider.jar")]),t._v("日志中可以看到以下内容：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Building argument map by agent arguments.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Sermant "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" artifact is running, artifact is: default\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Execute command: UNINSTALL-AGENT\n")])])]),a("p",[t._v("若日志如上正常输出，打开浏览器并导航到"),a("code",[t._v("http://localhost:8900")]),t._v("，可以看到已经有Sermant Agent实例已经下线（"),a("strong",[t._v("状态为灰色")]),t._v("），则说明Sermant Agent卸载成功，如下图所示效果：")]),t._v(" "),a("MyImage",{attrs:{src:"/docs-img/sermant-agent-agentmain-uninstall-success.png"}}),t._v(" "),a("blockquote",[a("p",[t._v("注：该能力可以在开发态通过调用sermant-agentcore-core所提供 "),a("a",{attrs:{href:"https://github.com/sermant-io/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/io/sermant/core/AgentCoreEntrance.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("AgentCoreEntrance"),a("OutboundLink")],1),t._v("::uninstall()接口来实现")])]),t._v(" "),a("h2",{attrs:{id:"动态安装插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动态安装插件"}},[t._v("#")]),t._v(" 动态安装插件")]),t._v(" "),a("p",[t._v("在通过"),a("a",{attrs:{href:"#agentmain%E6%96%B9%E5%BC%8F"}},[t._v("agentmain方式")]),t._v("启动后，可以动态的安装服务治理插件（需要插件支持动态安装和卸载），再次运行"),a("code",[t._v("AgentLoader")]),t._v("，并通过传入参数下发动态安装插件的指令"),a("code",[t._v("command=INSTALL-PLUGINS:pluginA/pluginB")]),t._v("：")]),t._v(" "),a("blockquote",[a("p",[t._v("注：可以一次安装多个插件，插件名通过 '/' 进行分隔，pluginA、pluginB为插件名，需要按照实际实际填写，本示例使用"),a("RouterLink",{attrs:{to:"/zh/document/plugin/monitor.html"}},[t._v("monitor")]),t._v("插件")],1)]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行指令根据所使用操作系统进行选择，此处以Linux、MacOS指令编写")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-cp")]),t._v(" ./:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/tools.jar AgentLoader\n请选择需要使用Sermant Agent的Java进程：\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(": xxxxx AgentLoader "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(": xxxxx spring-provider.jar "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(": xxxxx sermant-backend-1.2.0.jar "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n请输入需要使用Sermant Agent的Java进程序号：1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择spring-provider的进程序号")]),t._v("\n您选择的进程 ID 是：xxxxx "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n请输入Sermant Agent所在目录（默认采用该目录下sermant-agent.jar为入口）："),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${path}")]),t._v("/sermant-agent-x.x.x/agent "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 填充Sermant Agent所在目录")]),t._v("\n请输入向Sermant Agent传入的参数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("可为空，默认配置参数agentPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("：command"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("INSTALL-PLUGINS:monitor "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 此处通过传入参数下发安装插件指令 本示例以monitor进行演示")]),t._v("\n")])])]),a("p",[t._v("按照指引填充完成后在"),a("code",[t._v("spring-provider.jar")]),t._v("日志中可以看到以下内容：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Building argument map by agent arguments.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Sermant "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" artifact is running, artifact is: default\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Execute command: INSTALL-PLUGINS:monitor "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本示例以monitor进行演示")]),t._v("\n")])])]),a("p",[t._v("若日志如上正常输出，则说明插件安装成功，打开浏览器并导航到"),a("code",[t._v("http://localhost:8900")]),t._v("，可以看到插件已被成功安装，插件列可以看到当前安装的插件，如下图所示效果：")]),t._v(" "),a("p",[a("strong",[t._v("动态安装插件前")])]),t._v(" "),a("MyImage",{attrs:{src:"/docs-img/sermant-agent-dynamic-install-plugin-before.png"}}),t._v(" "),a("p",[a("strong",[t._v("动态安装插件后")])]),t._v(" "),a("MyImage",{attrs:{src:"/docs-img/sermant-agent-dynamic-install-plugin-success.png"}}),t._v(" "),a("blockquote",[a("p",[t._v("注：该能力可以在开发态通过调用sermant-agentcore-core所提供"),a("a",{attrs:{href:"https://github.com/sermant-io/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/io/sermant/core/plugin/PluginManager.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("PluginManager"),a("OutboundLink")],1),t._v("::install(Set pluginNames)方法来实现")])]),t._v(" "),a("h3",{attrs:{id:"重复安装插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重复安装插件"}},[t._v("#")]),t._v(" 重复安装插件")]),t._v(" "),a("p",[t._v("该能力的推出主要因为在一些场景中，插件的生效范围有动态扩展的诉求，主要是扩展增强的类和方法，并且需要保证已经生效的部分不会受到影响，在这种情况下，就不能通过卸载插件，调整配置后重新安装来解决此类场景的问题。例如故障注入场景中，针对不同的故障可能需要对不同的类进行字节码增强，并且需要按照测试方案中的编排逐渐注入各式各样的故障场景，在这种情况下，我们就不能通过卸载再重新安装的方式来完成这项工作，只能将负责故障注入的插件安装多次来解决这个问题，这就要用到重复安装插件的能力，重复安装插件将会复用静态资源，Sermant内部通过插件管理来隔离重复安装的插件。")]),t._v(" "),a("h4",{attrs:{id:"如何实施插件的重复安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何实施插件的重复安装"}},[t._v("#")]),t._v(" 如何实施插件的重复安装？")]),t._v(" "),a("p",[t._v("如需重复安装插件，在执行动态插件安装时需要将插件名后通过"),a("code",[t._v("#")]),t._v("号为本次安装的插件添加一个编码，如：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("command")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("INSTALL-PLUGINS:pluginA"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#FIRST")]),t._v("\n")])])]),a("p",[t._v("通过这种方式，插件就可以重复安装。")]),t._v(" "),a("blockquote",[a("p",[t._v("注：当卸载插件时，如果想卸载通过携带编码安装的插件，在卸载指令中也需要配置携带编码的插件名。")])]),t._v(" "),a("h2",{attrs:{id:"动态卸载插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动态卸载插件"}},[t._v("#")]),t._v(" 动态卸载插件")]),t._v(" "),a("p",[t._v("在通过"),a("a",{attrs:{href:"#agentmain%E6%96%B9%E5%BC%8F"}},[t._v("agentmain方式")]),t._v("启动并"),a("a",{attrs:{href:"#%E5%8A%A8%E6%80%81%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6"}},[t._v("动态安装插件")]),t._v("后，可以动态的卸载服务治理插件（需要插件支持动态安装和卸载），再次运行"),a("code",[t._v("AgentLoader")]),t._v("，并通过传入参数下发动态卸载插件的指令"),a("code",[t._v("command=UNINSTALL-PLUGINS:pluginA/pluginB")]),t._v("：")]),t._v(" "),a("blockquote",[a("p",[t._v("注：可以一次卸载多个插件，插件名通过 '/' 进行分隔，pluginA、pluginB为插件名，需要按照实际实际填写，本示例使用"),a("RouterLink",{attrs:{to:"/zh/document/plugin/monitor.html"}},[t._v("monitor")]),t._v("插件")],1)]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行指令根据所使用操作系统进行选择，此处以Linux、MacOS指令编写")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-cp")]),t._v(" ./:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/tools.jar AgentLoader\n请选择需要使用Sermant Agent的Java进程：\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(": xxxxx AgentLoader "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(": xxxxx spring-provider.jar "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(": xxxxx sermant-backend-1.2.0.jar "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n请输入需要使用Sermant Agent的Java进程序号：1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择spring-provider的进程序号")]),t._v("\n您选择的进程 ID 是：xxxxx "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n请输入Sermant Agent所在目录（默认采用该目录下sermant-agent.jar为入口）："),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${path}")]),t._v("/sermant-agent-x.x.x/agent "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 填充Sermant Agent所在目录")]),t._v("\n请输入向Sermant Agent传入的参数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("可为空，默认配置参数agentPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("：command"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("UNINSTALL-PLUGINS:monitor "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 此处通过传入参数下发安装插件指令")]),t._v("\n")])])]),a("p",[t._v("按照指引填充完成后在"),a("code",[t._v("spring-provider.jar")]),t._v("日志中可以看到以下内容：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Building argument map by agent arguments.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Sermant "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" artifact is running, artifact is: default\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xxxx-xx-xxTxx:xx:xx.xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Execute command: UNINSTALL-PLUGINS:monitor "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#本示例以monitor进行演示")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 该日志会展示本次卸载中恢复了多少被字节码增强过的类")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Byte Buddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" REDEFINE BATCH "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0 [1 of 1 type(s)]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Byte Buddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" REDEFINE COMPLETE "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" batch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("es"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" containing "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" types "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" failed batch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("es"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Byte Buddy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" REDEFINE COMPLETE "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" batch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("es"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" containing "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" types "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" failed batch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("es"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[t._v("若日志如上正常输出，打开浏览器并导航到"),a("code",[t._v("http://localhost:8900")]),t._v("，可以看到插件已被成功卸载，插件列可以看到当前安装的插件，如下图所示效果：")]),t._v(" "),a("p",[a("strong",[t._v("动态卸载插件前")])]),t._v(" "),a("MyImage",{attrs:{src:"/docs-img/sermant-agent-dynamic-uninstall-plugin-before.png"}}),t._v(" "),a("p",[a("strong",[t._v("动态卸载插件后")])]),t._v(" "),a("MyImage",{attrs:{src:"/docs-img/sermant-agent-dynamic-uninstall-plugin-success.png"}}),t._v(" "),a("blockquote",[a("p",[t._v("注：该能力可以在开发态通过调用sermant-agentcore-core所提供"),a("a",{attrs:{href:"https://github.com/sermant-io/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/io/sermant/core/plugin/PluginManager.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("PluginManager"),a("OutboundLink")],1),t._v("::uninstall(Set pluginNames)方法来实现")])]),t._v(" "),a("h2",{attrs:{id:"增强信息查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#增强信息查询"}},[t._v("#")]),t._v(" 增强信息查询")]),t._v(" "),a("p",[t._v("在sermant通过任意方式启动成功后，可以通过运行"),a("code",[t._v("AgentLoader")]),t._v("，并通过传入参数下发查询增强信息的指令"),a("code",[t._v("command=CHECK_ENHANCEMENT")]),t._v("：")]),t._v(" "),a("blockquote",[a("p",[t._v("注：增强信息查询将以"),a("strong",[t._v("INFO级别")]),t._v("打印到log中，如使用该功能，请事先配置日志级别，修改方式见"),a("RouterLink",{attrs:{to:"/zh/document/developer-guide/log-func.html#配置"}},[t._v("日志配置")])],1)]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行指令根据所使用操作系统进行选择，此处以Linux、MacOS指令编写")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-cp")]),t._v(" ./:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/tools.jar AgentLoader\n请选择需要使用Sermant Agent的Java进程：\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(": xxxxx AgentLoader "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(": xxxxx spring-provider.jar "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(": xxxxx sermant-backend-1.2.0.jar "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n请输入需要使用Sermant Agent的Java进程序号：1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择spring-provider的进程序号")]),t._v("\n您选择的进程 ID 是：xxxxx "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxxxx为进程号，此处模糊")]),t._v("\n请输入Sermant Agent所在目录（默认采用该目录下sermant-agent.jar为入口）："),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${path}")]),t._v("/sermant-agent-x.x.x/agent "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 填充Sermant Agent所在目录")]),t._v("\n请输入向Sermant Agent传入的参数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("可为空，默认配置参数agentPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("：command"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("CHECK_ENHANCEMENT "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 此处通过传入参数下发查询增强信息指令")]),t._v("\n")])])]),a("p",[t._v("按照指引填充完成后在sermant日志中可以看到以下内容：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("xxxx-xx-xx xx:xx:xx.xxx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("io.sermant.core.command.CheckEnhancementsCommandExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("execute:42"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Attach Listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ---------- PLUGINS ----------\nxxxx-xx-xx xx:xx:xx.xxx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("io.sermant.core.command.CheckEnhancementsCommandExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("execute:44"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Attach Listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" test-plugin-A:1.0.0\nxxxx-xx-xx xx:xx:xx.xxx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("io.sermant.core.command.CheckEnhancementsCommandExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("execute:44"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Attach Listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" test-plugin-B:1.0.0\nxxxx-xx-xx xx:xx:xx.xxx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("io.sermant.core.command.CheckEnhancementsCommandExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("execute:46"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Attach Listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ---------- ENHANCEMENT ----------\nxxxx-xx-xx xx:xx:xx.xxx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("io.sermant.core.command.CheckEnhancementsCommandExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("execute:58"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Attach Listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" test-plugin-A:1.0.0\nxxxx-xx-xx xx:xx:xx.xxx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("io.sermant.core.command.CheckEnhancementsCommandExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("execute:65"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Attach Listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" xxxxx.xxxx.TestClassA"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#testFunctionA(boolean,java.lang.String,java.lang.String,java.lang.String)@sun.misc.Launcher$AppClassLoader@5c647e05 [xxxx.xxxx.TestInterceptorA]")]),t._v("\nxxxx-xx-xx xx:xx:xx.xxx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("io.sermant.core.command.CheckEnhancementsCommandExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("execute:65"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Attach Listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" xxxxx.xxxx.TestClassB"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#testFunctionB(boolean,java.lang.String,java.lang.String,java.lang.String)@sun.misc.Launcher$AppClassLoader@5c647e05 [xxxx.xxxx.TestInterceptorB,xxxx.xxxx.TestInterceptorC]")]),t._v("\n")])])]),a("p",[t._v("打印的内容格式为：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("---------- PLUGINS ----------\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" 已安装的插件列表，格式为 插件名名:插件版本\ntest-plugin-A:1.0.0\ntest-plugin-B:1.0.0\n---------- ENHANCEMENT ----------\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" 成功完成增强处理的插件，格式为 插件名:插件版本\ntest-plugin-A:1.0.0\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" 该插件成功完成增强处理的信息\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" 格式为 增强的类全限定名"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#增强的方法名(入参类型)@类加载器信息 [拦截器列表]")]),t._v("\nxxxxx.xxxx.TestClassA"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#testFunctionA(boolean,java.lang.String,java.lang.String,java.lang.String)@sun.misc.Launcher$AppClassLoader@5c647e05 [xxxx.xxxx.TestInterceptorA]")]),t._v("\nxxxxx.xxxx.TestClassB"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#testFunctionB(boolean,java.lang.String,java.lang.String,java.lang.String)@sun.misc.Launcher$AppClassLoader@5c647e05 [xxxx.xxxx.TestInterceptorB,xxxx.xxxx.TestInterceptorC]")]),t._v("\n")])])]),a("h2",{attrs:{id:"配置规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置规范"}},[t._v("#")]),t._v(" 配置规范")]),t._v(" "),a("p",[t._v("Sermant项目properties配置文件和各插件的中yaml配置文件都支持下列几种参数配置方式，以配置文件中的"),a("code",[t._v("gateway.nettyIp=127.0.0.1")]),t._v("为例：")]),t._v(" "),a("ol",[a("li",[t._v("直接修改配置文件，即在配置文件中修改"),a("code",[t._v("gateway.nettyIp=127.0.0.1")])]),t._v(" "),a("li",[t._v("通过应用启动时的-D参数配置，即"),a("code",[t._v("-Dgateway.nettyIp=127.0.0.1")])]),t._v(" "),a("li",[t._v("通过环境变量配置，即在环境变量中新增"),a("code",[t._v("gateway.nettyIp=127.0.0.1")])]),t._v(" "),a("li",[t._v("通过Sermant Agent启动参数配置，即"),a("code",[t._v("-javaagent:sermant-agent.jar=gateway.nettyIp=127.0.0.1")])])]),t._v(" "),a("p",[t._v("以上四种方式，配置生效的优先级从高到低排列为：4 > 3 > 2 > 1。")]),t._v(" "),a("p",[t._v("其中，后三种参数配置值的获取方式支持多种格式，以配置文件中的"),a("code",[t._v("gateway.nettyIp=127.0.0.1")]),t._v("为例，下列配置格式都可识别：")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("gateway.nettyIp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("gateway_nettyIp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("gateway-nettyIp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("GATEWAY.NETTYIP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("GATEWAY_NETTYIP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("GATEWAY-NETTYIP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("gateway.nettyip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("gateway_nettyip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("gateway-nettyip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("gateway.netty.ip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("gateway_netty_ip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("gateway-netty-ip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("GATEWAY.NETTY.IP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("GATEWAY_NETTY_IP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("GATEWAY-NETTY-IP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n")])])]),a("p",[t._v("Sermant Agent将从上至下依次检索各项配置值是否通过启动参数、环境变量、-D参数来配置。")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("注意：")]),t._v(" 通过容器场景的env修改配置，请将点（.）可用下划线（_）替代！！！")]),t._v(" "),a("p",[t._v("原因：因为一些OS镜像无法识别带 . 的env")])]),t._v(" "),a("p",[t._v("举个例子：如需想通过pod的env修改配置文件中的"),a("code",[t._v("gateway.nettyIp=127.0.0.1")]),t._v("则")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gateway_nettyIp"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.2"')]),t._v("\n")])])]),a("h3",{attrs:{id:"附件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附件"}},[t._v("#")]),t._v(" 附件")]),t._v(" "),a("h4",{attrs:{id:"agentloader-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#agentloader-java"}},[t._v("#")]),t._v(" AgentLoader.java")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AgentInitializationException")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AgentLoadException")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AttachNotSupportedException")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VirtualMachine")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VirtualMachineDescriptor")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BufferedReader")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InputStreamReader")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AgentLoader")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AgentLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * AgentLoader 的main方法\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AttachNotSupportedException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AgentLoadException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AgentInitializationException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VirtualMachineDescriptor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" vmDescriptors "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VirtualMachine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vmDescriptors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEmpty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"没有找到 Java 进程"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"请选择需要使用Sermant Agent的Java进程："')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" vmDescriptors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VirtualMachineDescriptor")]),t._v(" descriptor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vmDescriptors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('": "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" descriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" descriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("displayName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读取用户输入的序号")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BufferedReader")]),t._v(" userInputReader "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BufferedReader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InputStreamReader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("in"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"请输入需要使用Sermant Agent的Java进程序号："')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" selectedProcessIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userInputReader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readLine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selectedProcessIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" selectedProcessIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" vmDescriptors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"无效的进程序号"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 连接到选定的虚拟机")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VirtualMachineDescriptor")]),t._v(" selectedDescriptor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vmDescriptors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selectedProcessIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"您选择的进程 ID 是："')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" selectedDescriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VirtualMachine")]),t._v(" vm "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VirtualMachine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("attach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selectedDescriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取Sermant Agent目录")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"请输入Sermant Agent所在目录（默认采用该目录下sermant-agent.jar为入口）："')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" agentPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userInputReader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readLine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取传入Sermant Agent的参数")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"请输入向Sermant Agent传入的参数(可为空，默认配置参数agentPath)："')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" agentArgs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"agentPath="')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" agentPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('","')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" userInputReader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readLine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 关闭资源")]),t._v("\n        userInputReader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动Sermant Agent")]),t._v("\n        vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadAgent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("agentPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/sermant-agent.jar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" agentArgs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("detach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])],1)}),[],!1,null,null,null);a.default=e.exports}}]);