<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sermant Agent User Manual | Sermant</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/logo.svg">
    <meta name="description" content="A Proxyless Service Mesh based on Bytecode Enhancement">
    
    <link rel="preload" href="/assets/css/0.styles.87ac6783.css" as="style"><link rel="preload" href="/assets/js/app.df8eddc2.js" as="script"><link rel="preload" href="/assets/js/3.06f127bc.js" as="script"><link rel="preload" href="/assets/js/1.c8bacf5b.js" as="script"><link rel="preload" href="/assets/js/62.4125fce4.js" as="script"><link rel="preload" href="/assets/js/14.199c38f6.js" as="script"><link rel="prefetch" href="/assets/js/10.dc8ff4c8.js"><link rel="prefetch" href="/assets/js/100.c5222045.js"><link rel="prefetch" href="/assets/js/101.78152f69.js"><link rel="prefetch" href="/assets/js/102.35ea26ff.js"><link rel="prefetch" href="/assets/js/103.bf055e03.js"><link rel="prefetch" href="/assets/js/104.27fa37b0.js"><link rel="prefetch" href="/assets/js/105.bfdb15e5.js"><link rel="prefetch" href="/assets/js/106.e8c12c36.js"><link rel="prefetch" href="/assets/js/107.7f1a13e7.js"><link rel="prefetch" href="/assets/js/108.2d90bf2e.js"><link rel="prefetch" href="/assets/js/109.320b7cf3.js"><link rel="prefetch" href="/assets/js/11.bcd0a917.js"><link rel="prefetch" href="/assets/js/110.1042ea95.js"><link rel="prefetch" href="/assets/js/111.94ec9618.js"><link rel="prefetch" href="/assets/js/112.a1c7e784.js"><link rel="prefetch" href="/assets/js/113.81d1d9c5.js"><link rel="prefetch" href="/assets/js/114.cd06da03.js"><link rel="prefetch" href="/assets/js/12.fd6a031f.js"><link rel="prefetch" href="/assets/js/13.7e37daca.js"><link rel="prefetch" href="/assets/js/15.900a8374.js"><link rel="prefetch" href="/assets/js/16.dc00a508.js"><link rel="prefetch" href="/assets/js/17.7b9f75d8.js"><link rel="prefetch" href="/assets/js/18.dd5aeee6.js"><link rel="prefetch" href="/assets/js/19.922def51.js"><link rel="prefetch" href="/assets/js/20.bac96cfe.js"><link rel="prefetch" href="/assets/js/21.75729028.js"><link rel="prefetch" href="/assets/js/22.43cc7ae1.js"><link rel="prefetch" href="/assets/js/23.80aecc10.js"><link rel="prefetch" href="/assets/js/24.d862bfe2.js"><link rel="prefetch" href="/assets/js/25.d2bfc810.js"><link rel="prefetch" href="/assets/js/26.fe2d3037.js"><link rel="prefetch" href="/assets/js/27.09e84572.js"><link rel="prefetch" href="/assets/js/28.44ffc507.js"><link rel="prefetch" href="/assets/js/29.54bad9a2.js"><link rel="prefetch" href="/assets/js/30.4341a551.js"><link rel="prefetch" href="/assets/js/31.a43a1a26.js"><link rel="prefetch" href="/assets/js/32.fae9f060.js"><link rel="prefetch" href="/assets/js/33.d9926dae.js"><link rel="prefetch" href="/assets/js/34.d8960a15.js"><link rel="prefetch" href="/assets/js/35.4d936c34.js"><link rel="prefetch" href="/assets/js/36.69b2f3fb.js"><link rel="prefetch" href="/assets/js/37.f1740a13.js"><link rel="prefetch" href="/assets/js/38.c2bf7b2d.js"><link rel="prefetch" href="/assets/js/39.8873348c.js"><link rel="prefetch" href="/assets/js/4.7add7152.js"><link rel="prefetch" href="/assets/js/40.55cec7c8.js"><link rel="prefetch" href="/assets/js/41.377fb9d6.js"><link rel="prefetch" href="/assets/js/42.d220a2de.js"><link rel="prefetch" href="/assets/js/43.6cfcf2bd.js"><link rel="prefetch" href="/assets/js/44.ef4e02ab.js"><link rel="prefetch" href="/assets/js/45.cb46aba8.js"><link rel="prefetch" href="/assets/js/46.5362eeb2.js"><link rel="prefetch" href="/assets/js/47.706a7dbb.js"><link rel="prefetch" href="/assets/js/48.33159e6a.js"><link rel="prefetch" href="/assets/js/49.1a3cd92f.js"><link rel="prefetch" href="/assets/js/5.4a333fb7.js"><link rel="prefetch" href="/assets/js/50.0a891537.js"><link rel="prefetch" href="/assets/js/51.0f656575.js"><link rel="prefetch" href="/assets/js/52.a94dbeda.js"><link rel="prefetch" href="/assets/js/53.4d4b62c4.js"><link rel="prefetch" href="/assets/js/54.b1845a92.js"><link rel="prefetch" href="/assets/js/55.ef62bf5d.js"><link rel="prefetch" href="/assets/js/56.a2f0ad08.js"><link rel="prefetch" href="/assets/js/57.a0e4792b.js"><link rel="prefetch" href="/assets/js/58.3b83140b.js"><link rel="prefetch" href="/assets/js/59.255861a7.js"><link rel="prefetch" href="/assets/js/6.72029eac.js"><link rel="prefetch" href="/assets/js/60.f1229caf.js"><link rel="prefetch" href="/assets/js/61.c00aff9b.js"><link rel="prefetch" href="/assets/js/63.2f37913f.js"><link rel="prefetch" href="/assets/js/64.ba4db5b6.js"><link rel="prefetch" href="/assets/js/65.5917e76d.js"><link rel="prefetch" href="/assets/js/66.929b4eb4.js"><link rel="prefetch" href="/assets/js/67.8f734315.js"><link rel="prefetch" href="/assets/js/68.33a8de78.js"><link rel="prefetch" href="/assets/js/69.0e3fe7d9.js"><link rel="prefetch" href="/assets/js/7.698dd478.js"><link rel="prefetch" href="/assets/js/70.c311703c.js"><link rel="prefetch" href="/assets/js/71.b7826362.js"><link rel="prefetch" href="/assets/js/72.6d452995.js"><link rel="prefetch" href="/assets/js/73.9afc2fcf.js"><link rel="prefetch" href="/assets/js/74.cc2dec6d.js"><link rel="prefetch" href="/assets/js/75.83cc918a.js"><link rel="prefetch" href="/assets/js/76.e25fcaba.js"><link rel="prefetch" href="/assets/js/77.ecd3dfcc.js"><link rel="prefetch" href="/assets/js/78.61a9dc3a.js"><link rel="prefetch" href="/assets/js/79.52a8f851.js"><link rel="prefetch" href="/assets/js/8.10750ce9.js"><link rel="prefetch" href="/assets/js/80.a56d59b3.js"><link rel="prefetch" href="/assets/js/81.4ce89491.js"><link rel="prefetch" href="/assets/js/82.107c34fa.js"><link rel="prefetch" href="/assets/js/83.dd28b43e.js"><link rel="prefetch" href="/assets/js/84.9f3a4808.js"><link rel="prefetch" href="/assets/js/85.fc619b9d.js"><link rel="prefetch" href="/assets/js/86.233cebc6.js"><link rel="prefetch" href="/assets/js/87.1460eff8.js"><link rel="prefetch" href="/assets/js/88.58ac31af.js"><link rel="prefetch" href="/assets/js/89.510960d2.js"><link rel="prefetch" href="/assets/js/9.7f57e4b0.js"><link rel="prefetch" href="/assets/js/90.a3f0b945.js"><link rel="prefetch" href="/assets/js/91.677bfd74.js"><link rel="prefetch" href="/assets/js/92.d690326d.js"><link rel="prefetch" href="/assets/js/93.e689ca55.js"><link rel="prefetch" href="/assets/js/94.7e4b64a9.js"><link rel="prefetch" href="/assets/js/95.dd730e36.js"><link rel="prefetch" href="/assets/js/96.237aba3b.js"><link rel="prefetch" href="/assets/js/97.de19be73.js"><link rel="prefetch" href="/assets/js/98.6e0a4794.js"><link rel="prefetch" href="/assets/js/99.c4afbd41.js">
    <link rel="stylesheet" href="/assets/css/0.styles.87ac6783.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><img src="/img/sermant-logo.png" alt="Sermant" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/document/" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/sermant-io/Sermant" target="_blank" class="nav-link external">
  Github
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/document/user-guide/sermant-agent.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en/document/user-guide/sermant-agent.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <div class="nav-item"><!----></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/document/" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/sermant-io/Sermant" target="_blank" class="nav-link external">
  Github
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/document/user-guide/sermant-agent.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en/document/user-guide/sermant-agent.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <div class="nav-item"><!----></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Start</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>User Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/document/user-guide/" aria-current="page" class="sidebar-link">Introduction to the use of Sermant</a></li><li><a href="/en/document/user-guide/sermant-agent.html" aria-current="page" class="active sidebar-link">Sermant Agent User Manual</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/document/user-guide/sermant-agent.html#supported-version" class="sidebar-link">Supported Version</a></li><li class="sidebar-sub-header"><a href="/en/document/user-guide/sermant-agent.html#premain-startup-static-attachment" class="sidebar-link">Premain Startup: Static Attachment</a></li><li class="sidebar-sub-header"><a href="/en/document/user-guide/sermant-agent.html#agentmain-startup-dynamic-attachment" class="sidebar-link">Agentmain Startup：Dynamic Attachment</a></li><li class="sidebar-sub-header"><a href="/en/document/user-guide/sermant-agent.html#enhancement-information-query" class="sidebar-link">Enhancement Information Query</a></li><li class="sidebar-sub-header"><a href="/en/document/user-guide/sermant-agent.html#sermant-command-instructions" class="sidebar-link">Sermant Command Instructions</a></li><li class="sidebar-sub-header"><a href="/en/document/user-guide/sermant-agent.html#configuration-specifications" class="sidebar-link">Configuration Specifications</a></li><li class="sidebar-sub-header"><a href="/en/document/user-guide/sermant-agent.html#attachments" class="sidebar-link">Attachments</a></li></ul></li><li><a href="/en/document/user-guide/sermant-backend.html" class="sidebar-link">Sermant Backend User Manual</a></li><li><a href="/en/document/user-guide/configuration-center.html" class="sidebar-link">Dynamic Configuration Center User Manual</a></li><li><a href="/en/document/user-guide/sermant-xds.html" class="sidebar-link">Proxyless Service Mesh Based on Sermant and Istio</a></li><li><a href="/en/document/user-guide/injector.html" class="sidebar-link">Sermant Injector User Manual</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Plugin Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Developer Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Community Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>FAQ</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sermant-agent-user-manual"><a href="#sermant-agent-user-manual" class="header-anchor">#</a> Sermant Agent User Manual</h1> <p>Sermant Agent is the core component providing bytecode enhancement capabilities and various service governance functionalities. The content under the <code>sermant-agent-x.x.x/agent</code> directory described in the <a href="/en/document/user-guide/" class="router-link-active">Sermant Introduction</a> outlines the modules of the Sermant Agent component. The main body of Sermant Agent offers foundational bytecode enhancement capabilities and a development framework, while also supporting essential features such as heartbeat functionality, dynamic configuration, logging, and event reporting. It currently supports both <code>premain</code> and <code>agentmain</code>startup methods.</p> <p>The Sermant Agent plugin directory includes plugins that provide service governance capabilities such as tag routing, rate limiting and degradation, and dual registration. It now supports the dynamic installation and uninstallation of service governance plugins while the host service is running, provided the plugins support dynamic installation and uninstallation.</p> <h2 id="supported-version"><a href="#supported-version" class="header-anchor">#</a> Supported Version</h2> <p>Sermant Agent supports Linux and Windows, and is developed based on JDK 1.8. It is recommended to use JDK 1.8 or higher versions.</p> <ul><li><a href="https://gitee.com/openeuler/bishengjdk-8" target="_blank" rel="noopener noreferrer">HuaweiJDK 1.8<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> / <a href="https://github.com/openjdk/jdk" target="_blank" rel="noopener noreferrer">OpenJDK 1.8<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> / <a href="https://www.oracle.com/java/technologies/downloads/" target="_blank" rel="noopener noreferrer">OracleJDK 1.8<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="premain-startup-static-attachment"><a href="#premain-startup-static-attachment" class="header-anchor">#</a> Premain Startup: Static Attachment</h2> <p>To start Sermant Agent using the <code>premain</code> method via static attachment, configure the host service with the <code>-javaagent</code>option. Based on the environment set up in the <a href="/en/document/QuickStart.html">Quick Start Guide</a>, execute the following command to launch Sermant Agent:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># linux mac</span>
<span class="token function">java</span> -javaagent:<span class="token variable">${path}</span>/sermant-agent-x.x.x/agent/sermant-agent.jar <span class="token parameter variable">-jar</span> spring-provider.jar

<span class="token comment"># windows</span>
<span class="token function">java</span> -javaagent:<span class="token variable">${path}</span><span class="token punctuation">\</span>sermant-agent-x.x.x<span class="token punctuation">\</span>agent<span class="token punctuation">\</span>sermant-agent.jar <span class="token parameter variable">-jar</span> spring-provider.jar
</code></pre></div><p>Check the beginning of the <code>spring-provider.jar</code> log to see if it contains the following content:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Loading god library into BootstrapClassLoader.
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building argument map by agent arguments.
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Loading core library into SermantClassLoader.
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Loading sermant agent, artifact is: default
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Load sermant done, artifact is: default
</code></pre></div><p>If the log outputs as shown above, it indicates that Sermant Agent has started successfully. Open your browser and navigate to <code>http://localhost:8900</code>, where you should see a Sermant Agent instance. The expected result is shown in the image below:</p> <div class="el-image"><div class="el-image__placeholder"></div><!----></div> <h2 id="agentmain-startup-dynamic-attachment"><a href="#agentmain-startup-dynamic-attachment" class="header-anchor">#</a> Agentmain Startup：Dynamic Attachment</h2> <h3 id="agent-installation"><a href="#agent-installation" class="header-anchor">#</a> Agent Installation</h3> <ul><li>Based on the environment set up in the <a href="/en/document/QuickStart.html">Quick Start Guide</a>, first start the host service <code>spring-provider.jar</code>.</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> spring-provider.jar
</code></pre></div><ul><li>To start by <code>agentmain</code>,  you need to use the <code>Attach API</code>. First, create a Java file using the <a href="#attachments">AgentLoader.java</a> and compile it with <code>javac</code>:</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Linux、MacOS</span>
javac <span class="token parameter variable">-cp</span> ./:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar AgentLoader.java

<span class="token comment"># Windows has correctly configured the environment variables required for JAVA.</span>
javac <span class="token parameter variable">-cp</span> <span class="token string">&quot;%JAVA_HOME%\lib<span class="token entity" title="\t">\t</span>ools.jar&quot;</span> AgentLoader.java <span class="token parameter variable">-encoding</span> utf-8
</code></pre></div><ul><li>After compilation, an <code>AgentLoader.class</code> file will be generated in the directory. Run <code>AgentLoader</code> using the following command:</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Linux、MacOS</span>
<span class="token function">java</span> <span class="token parameter variable">-cp</span> ./:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar AgentLoader

<span class="token comment"># Windows has correctly configured the environment variables required for JAVA.</span>
<span class="token function">java</span> AgentLoader
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Choose the command to run based on the operating system you are using. Below are the commands for Linux and MacOS:</span>
$ <span class="token function">java</span> <span class="token parameter variable">-cp</span> ./:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar AgentLoader
Please <span class="token keyword">select</span> the Java process you wish to use with Sermant Agent:
<span class="token number">0</span>: xxxxx AgentLoader <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
<span class="token number">1</span>: xxxxx spring-provider.jar <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
<span class="token number">2</span>: xxxxx sermant-backend-1.2.0.jar <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
Please enter the Java process number you wish to use with Sermant Agent: <span class="token number">1</span> <span class="token comment"># Select the process number of spring-provider.</span>
The process ID you selected: xxxxx <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
Please enter the directory where Sermant Agent is located <span class="token punctuation">(</span>by default, it uses sermant-agent.jar <span class="token keyword">in</span> this directory as the entry point<span class="token punctuation">)</span>: <span class="token variable">${path}</span>/sermant-agent-x.x.x/agent <span class="token comment"># Enter the directory where Sermant Agent is located.</span>
Please enter the parameters to pass to Sermant Agent <span class="token punctuation">(</span>can be empty, default configuration parameter is agentPath<span class="token punctuation">)</span>: <span class="token comment"># Configure Sermant Agent parameters (can be empty)</span>
</code></pre></div><p>After completing the input according to the instructions, you can see the following content in the <code>spring-provider.jar</code>log:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Loading god library into BootstrapClassLoader.
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building argument map by agent arguments.
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Loading core library into SermantClassLoader.
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Loading sermant agent, artifact is: default
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Load sermant done, artifact is: default
</code></pre></div><p>If the log outputs as shown above, it indicates that Sermant Agent successfully read the startup command and began the installation. Open your browser and navigate to <code>http://localhost:8900</code>, where you should see a Sermant Agent instance. The expected result is shown in the image below:</p> <div class="el-image"><div class="el-image__placeholder"></div><!----></div> <h3 id="agent-uninstallation"><a href="#agent-uninstallation" class="header-anchor">#</a> Agent Uninstallation</h3> <blockquote><p>Note: To avoid potential unpredictable exceptions when uninstalling service governance capabilities developed based on the premain startup method, Sermant Agent imposes restrictions on uninstallation. Only Sermant Agents started via the agentmain method support uninstallation; those started via the premain method do not support uninstallation.</p></blockquote> <p>After <a href="#agent-installation">dynamically attaching the Agent</a>, you can uninstall Agent. Run <code>AgentLoader</code> again and pass the parameter to issue the uninstall command for Sermant Agent using <code>command=UNINSTALL-AGENT</code>:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Choose the command to run based on the operating system you are using. Below are the commands for Linux and MacOS:</span>
$ <span class="token function">java</span> <span class="token parameter variable">-cp</span> ./:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar AgentLoader
Please <span class="token keyword">select</span> the Java process you wish to use with Sermant Agent:
<span class="token number">0</span>: xxxxx AgentLoader <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
<span class="token number">1</span>: xxxxx spring-provider.jar <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
<span class="token number">2</span>: xxxxx sermant-backend-1.2.0.jar <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
Please enter the Java process number you wish to use with Sermant Agent: <span class="token number">1</span> <span class="token comment"># Select the process number of spring-provider.</span>
The process ID you selected: xxxxx <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
Please enter the directory where Sermant Agent is located <span class="token punctuation">(</span>by default, it uses sermant-agent.jar <span class="token keyword">in</span> this directory as the entry point<span class="token punctuation">)</span>: <span class="token variable">${path}</span>/sermant-agent-x.x.x/agent <span class="token comment"># Enter the directory where Sermant Agent is located.</span>
Please enter the parameters to pass to Sermant Agent <span class="token punctuation">(</span>can be empty, default configuration parameter is agentPath<span class="token punctuation">)</span>:command<span class="token operator">=</span>UNINSTALL-AGENT <span class="token comment"># Pass the parameter here to issue the uninstall command.</span>
</code></pre></div><p>After completing the input according to the instructions, you can see the following content in the <code>spring-provider.jar</code>log:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building argument map by agent arguments.
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Sermant <span class="token keyword">for</span> artifact is running, artifact is: default
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Execute command: UNINSTALL-AGENT
</code></pre></div><p>If the log outputs as shown above, open your browser and navigate to <code>http://localhost:8900</code>. You should see that the Sermant Agent instance has been shut down (<strong>status is gray</strong>), indicating that Sermant Agent has been successfully uninstalled. The expected result is shown in the image below:</p> <div class="el-image"><div class="el-image__placeholder"></div><!----></div> <blockquote><p>Note: This capability can be implemented in the development mode by calling the <code>uninstall</code> interface provided by <a href="https://github.com/sermant-io/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/io/sermant/core/AgentCoreEntrance.java" target="_blank" rel="noopener noreferrer">AgentCoreEntrance<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in the sermant-agentcore-core module.</p></blockquote> <h3 id="dynamic-plugin-installation"><a href="#dynamic-plugin-installation" class="header-anchor">#</a> Dynamic Plugin Installation</h3> <p>After <a href="#agent-installation">dynamically attaching the Agent</a>, you can dynamically install service governance plugins (provided the plugins support dynamic installation and uninstallation). Run <code>AgentLoader</code> again and pass the parameter to issue the dynamic plugin installation command using <code>command=INSTALL-PLUGINS:pluginA/pluginB</code>:</p> <blockquote><p>Note: Multiple plugins can be installed at once, separated by '/'. <code>pluginA</code> and <code>pluginB</code> are placeholders for actual plugin names. In this example, we use the <a href="/en/document/plugin/monitor.html">monitor</a> plugin.</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Choose the command to run based on the operating system you are using. Below are the commands for Linux and MacOS:</span>
$ <span class="token function">java</span> <span class="token parameter variable">-cp</span> ./:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar AgentLoader
Please <span class="token keyword">select</span> the Java process you wish to use with Sermant Agent:
<span class="token number">0</span>: xxxxx AgentLoader <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
<span class="token number">1</span>: xxxxx spring-provider.jar <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
<span class="token number">2</span>: xxxxx sermant-backend-1.2.0.jar <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
Please enter the Java process number you wish to use with Sermant Agent: <span class="token number">1</span> <span class="token comment"># Select the process number of spring-provider.</span>
The process ID you selected: xxxxx <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
Please enter the directory where Sermant Agent is located <span class="token punctuation">(</span>by default, it uses sermant-agent.jar <span class="token keyword">in</span> this directory as the entry point<span class="token punctuation">)</span>: <span class="token variable">${path}</span>/sermant-agent-x.x.x/agent <span class="token comment"># Enter the directory where Sermant Agent is located.</span>
Please enter the parameters to pass to Sermant Agent <span class="token punctuation">(</span>can be empty, default configuration parameter is agentPath<span class="token punctuation">)</span>:command<span class="token operator">=</span>INSTALL-PLUGINS:monitor <span class="token comment"># Pass the parameter here to issue the install plugin command. This example demonstrates using the monitor plugin.</span>
</code></pre></div><p>After completing the input according to the instructions, you can see the following content in the <code>spring-provider.jar</code>log:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building argument map by agent arguments.
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Sermant <span class="token keyword">for</span> artifact is running, artifact is: default
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Execute command: INSTALL-PLUGINS:monitor <span class="token comment"># This example demonstrates using the monitor plugin.</span>
</code></pre></div><p>If the log outputs as shown above, it indicates that the plugin was installed successfully. Open your browser and navigate to <code>http://localhost:8900</code>, where you should see that the plugin has been successfully installed. The plugins list will display the currently installed plugins, as shown in the image below:</p> <p><strong>Before dynamically installing plugin</strong></p> <div class="el-image"><div class="el-image__placeholder"></div><!----></div> <p><strong>After dynamically installing plugin</strong></p> <div class="el-image"><div class="el-image__placeholder"></div><!----></div> <blockquote><p>Note: This capability can be implemented in the development mode by calling the <code>install(Set pluginNames)</code> method provided by <a href="https://github.com/sermant-io/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/io/sermant/core/plugin/PluginManager.java" target="_blank" rel="noopener noreferrer">PluginManager<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in the sermant-agentcore-core module.</p></blockquote> <h3 id="repeated-plugin-installation"><a href="#repeated-plugin-installation" class="header-anchor">#</a> Repeated Plugin Installation</h3> <p>The introduction of this capability is mainly due to the need for dynamically extending the effective scope of plugins in certain scenarios, primarily expanding the enhanced classes and methods, while ensuring that the already effective parts remain unaffected. In such cases, uninstalling and reinstalling plugins after adjusting configurations cannot address the issue.For example, in fault injection scenarios, different faults may require bytecode enhancement for different classes, and various fault scenarios need to be gradually injected according to the test plan's orchestration. In such cases, we cannot complete this task by uninstalling and reinstalling the plugin. Instead, we must install the fault injection plugin multiple times to solve this problem. This requires the capability of repeated plugin installation. Repeated plugin installation will reuse static resources, and Sermant internally isolates the repeatedly installed plugins through plugin management.</p> <h3 id="how-to-implement-repeated-plugin-installation"><a href="#how-to-implement-repeated-plugin-installation" class="header-anchor">#</a> How to Implement Repeated Plugin Installation?</h3> <p>To install plugins repeatedly, you need to add a unique identifier to the plugin name using the <code>#</code> symbol when performing dynamic plugin installation. For example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">command</span><span class="token operator">=</span>INSTALL-PLUGINS:pluginA<span class="token comment">#FIRST</span>
</code></pre></div><p>In this way, the plugin can be installed repeatedly.</p> <blockquote><p>Note: When uninstalling a plugin, if you want to uninstall a plugin that was installed with an identifier, you need to specify the plugin name with the identifier in the uninstall command as well.</p></blockquote> <h3 id="dynamic-plugin-uninstallation"><a href="#dynamic-plugin-uninstallation" class="header-anchor">#</a> Dynamic Plugin Uninstallation</h3> <p>After <a href="#agent-installation">dynamically attaching the Agent</a> and <a href="#dynamic-plugin-installation">dynamically installing the plugin</a>, you can dynamically uninstall service governance plugins (provided the plugins support dynamic installation and uninstallation). Run <code>AgentLoader</code> again and pass the parameter to issue the dynamic plugin uninstallation command using <code>command=UNINSTALL-PLUGINS:pluginA/pluginB</code>:</p> <blockquote><p>Note: Multiple plugins can be uninstalled at once, separated by '/'. <code>pluginA</code> and <code>pluginB</code> are placeholders for actual plugin names. In this example, we use the <a href="/en/document/plugin/monitor.html">monitor</a> plugin.</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Choose the command to run based on the operating system you are using. Below are the commands for Linux and MacOS:</span>
$ <span class="token function">java</span> <span class="token parameter variable">-cp</span> ./:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar AgentLoader
Please <span class="token keyword">select</span> the Java process you wish to use with Sermant Agent:
<span class="token number">0</span>: xxxxx AgentLoader <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
<span class="token number">1</span>: xxxxx spring-provider.jar <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
<span class="token number">2</span>: xxxxx sermant-backend-1.2.0.jar <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
Please enter the Java process number you wish to use with Sermant Agent: <span class="token number">1</span> <span class="token comment"># Select the process number of spring-provider.</span>
The process ID you selected: xxxxx <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
Please enter the directory where Sermant Agent is located <span class="token punctuation">(</span>by default, it uses sermant-agent.jar <span class="token keyword">in</span> this directory as the entry point<span class="token punctuation">)</span>: <span class="token variable">${path}</span>/sermant-agent-x.x.x/agent <span class="token comment"># Enter the directory where Sermant Agent is located.</span>
Please enter the parameters to pass to Sermant Agent <span class="token punctuation">(</span>can be empty, default configuration parameter is agentPath<span class="token punctuation">)</span>:command<span class="token operator">=</span>UNINSTALL-PLUGINS:monitor <span class="token comment"># Pass the parameter here to issue the uninstall plugin command.</span>
</code></pre></div><p>After completing the input according to the instructions, you can see the following content in the <code>spring-provider.jar</code>log:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building argument map by agent arguments.
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Sermant <span class="token keyword">for</span> artifact is running, artifact is: default
<span class="token punctuation">[</span>xxxx-xx-xxTxx:xx:xx.xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Execute command: UNINSTALL-PLUGINS:monitor <span class="token comment">#This example demonstrates using &quot;monitor&quot; plugin.</span>
<span class="token comment"># The log will show how many bytecode-enhanced classes were restored during the uninstallation.</span>
<span class="token punctuation">[</span>Byte Buddy<span class="token punctuation">]</span> REDEFINE BATCH <span class="token comment">#0 [1 of 1 type(s)]</span>
<span class="token punctuation">[</span>Byte Buddy<span class="token punctuation">]</span> REDEFINE COMPLETE <span class="token number">1</span> batch<span class="token punctuation">(</span>es<span class="token punctuation">)</span> containing <span class="token number">1</span> types <span class="token punctuation">[</span><span class="token number">0</span> failed batch<span class="token punctuation">(</span>es<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>Byte Buddy<span class="token punctuation">]</span> REDEFINE COMPLETE <span class="token number">1</span> batch<span class="token punctuation">(</span>es<span class="token punctuation">)</span> containing <span class="token number">0</span> types <span class="token punctuation">[</span><span class="token number">0</span> failed batch<span class="token punctuation">(</span>es<span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre></div><p>If the log outputs as shown above, open your browser and navigate to <code>http://localhost:8900</code>. You should see that the plugin has been successfully uninstalled. The plugins list will display the currently installed plugins, as shown in the image below:</p> <p><strong>Before dynamically installing plugin</strong></p> <div class="el-image"><div class="el-image__placeholder"></div><!----></div> <p><strong>After dynamically installing plugin</strong></p> <div class="el-image"><div class="el-image__placeholder"></div><!----></div> <blockquote><p>Note: This capability can be implemented in development mode by calling the <code>uninstall(Set pluginNames)</code> method provided by <a href="https://github.com/sermant-io/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/io/sermant/core/plugin/PluginManager.java" target="_blank" rel="noopener noreferrer">PluginManager<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in the sermant-agentcore-core module.</p></blockquote> <h3 id="one-click-agent-and-plugin-attachment"><a href="#one-click-agent-and-plugin-attachment" class="header-anchor">#</a> One-Click Agent and Plugin Attachment</h3> <p>The <a href="https://github.com/sermant-io/Sermant/blob/develop/scripts/attach.c" target="_blank" rel="noopener noreferrer">Sermant Dynamic Installation and Uninstallation Script<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a C language script based on the Java Attach API. It can attach Sermant Agent to JVM processes on either <strong>virtual machines</strong> or <strong>containers</strong>.</p> <blockquote><p>Note: This script is only for use on <strong>Linux systems</strong>.</p></blockquote> <h4 id="parameter-configuration"><a href="#parameter-configuration" class="header-anchor">#</a> Parameter Configuration</h4> <ul><li><p><code>-path=</code>：required parameter, followed by the <strong>absolute path</strong> of sermant-agent.jar.</p></li> <li><p><code>-pid=</code>：required parameter, followed by the PID of the host microservice, which can be found using commands like <code>ps -ef</code>.</p></li> <li><p><code>-command=</code>：required parameter, followed by the command to attach Sermant Agent. Supported commands can be found in the <a href="#sermant-command-instructions">Sermant Command Instructions</a>.</p></li> <li><p><code>-nspid=</code>：when the host microservice is running in a container, this parameter is required and should be followed by the host microservice's nspid, which can be found using the <code>cat /proc/{pid}/status</code> command. If the host microservice is not running in a container, do not include this parameter.</p></li></ul> <h4 id="script-usage-steps"><a href="#script-usage-steps" class="header-anchor">#</a> Script Usage Steps</h4> <h5 id="step-1-compile-jvm-attach-c"><a href="#step-1-compile-jvm-attach-c" class="header-anchor">#</a> Step 1. Compile <code>jvm_attach.c</code></h5> <div class="language-bash extra-class"><pre class="language-bash"><code>gcc attach.c <span class="token parameter variable">-o</span> attach
</code></pre></div><blockquote><p>Note: Please ensure that <code>gcc</code> is already installed.</p></blockquote> <h5 id="step-2-execute-the-attach-script"><a href="#step-2-execute-the-attach-script" class="header-anchor">#</a> Step 2. Execute the Attach Script</h5> <div class="language-bash extra-class"><pre class="language-bash"><code>./attach <span class="token parameter variable">-path</span><span class="token operator">=</span><span class="token punctuation">{</span>sermant-path<span class="token punctuation">}</span>/sermant-agent.jar <span class="token parameter variable">-pid</span><span class="token operator">=</span><span class="token punctuation">{</span>pid<span class="token punctuation">}</span> <span class="token parameter variable">-command</span><span class="token operator">=</span><span class="token punctuation">{</span>COMMAND<span class="token punctuation">}</span>
</code></pre></div><p>The script execution will display as follows:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@b6b9af8e5610 root<span class="token punctuation">]</span><span class="token comment"># ./attach -path=/home/sermant-agent-1.0.0/agent/sermant-agent.jar -pid=494 -command=INSTALL-PLUGINS:database-write-prohibition</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>: <span class="token environment constant">PATH</span><span class="token builtin class-name">:</span> /home/sermant-agent-1.0.0/agent/sermant-agent.jar
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>: PID: <span class="token number">494</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>: COMMAND: INSTALL-PLUGINS:database-write-prohibition
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>: Connected to remote JVM of pid <span class="token number">494</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>: ret code is <span class="token number">0</span>, Attach success<span class="token operator">!</span>
</code></pre></div><h2 id="enhancement-information-query"><a href="#enhancement-information-query" class="header-anchor">#</a> Enhancement Information Query</h2> <p>After Sermant has been successfully started by any method, you can run <code>AgentLoader</code> and pass the parameter to issue the query enhancement information command using <code>command=CHECK_ENHANCEMENT</code>:</p> <blockquote><p>Note: The enhancement information query will be printed to the log at the <strong>INFO level</strong>. If you use this feature, please configure the log level in advance. For modification instructions, see <a href="/en/document/developer-guide/log-func.html#configuration">Log Configuration</a></p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Choose the command to run based on the operating system you are using. Below are the commands for Linux and MacOS:</span>
$ <span class="token function">java</span> <span class="token parameter variable">-cp</span> ./:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar AgentLoader
Please <span class="token keyword">select</span> the Java process you wish to use with Sermant Agent:
<span class="token number">0</span>: xxxxx AgentLoader <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
<span class="token number">1</span>: xxxxx spring-provider.jar <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
<span class="token number">2</span>: xxxxx sermant-backend-1.2.0.jar <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
Please enter the Java process number you wish to use with Sermant Agent: <span class="token number">1</span> <span class="token comment"># Select the process number of spring-provider.</span>
The process ID you selected: xxxxx <span class="token comment"># xxxxx represents the process ID, which is obscured here.</span>
Please enter the directory where Sermant Agent is located <span class="token punctuation">(</span>by default, it uses sermant-agent.jar <span class="token keyword">in</span> this directory as the entry point<span class="token punctuation">)</span>: <span class="token variable">${path}</span>/sermant-agent-x.x.x/agent <span class="token comment"># Enter the directory where Sermant Agent is located.</span>
Please enter the parameters to pass to Sermant Agent <span class="token punctuation">(</span>can be empty, default configuration parameter is agentPath<span class="token punctuation">)</span>:command<span class="token operator">=</span>CHECK_ENHANCEMENT <span class="token comment"># Pass the parameter here to issue the query enhancement information command.</span>
</code></pre></div><p>After completing the input according to the instructions, you can see the following content in the Sermant log:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>xxxx-xx-xx xx:xx:xx.xxx <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>io.sermant.core.command.CheckEnhancementsCommandExecutor<span class="token punctuation">]</span> <span class="token punctuation">[</span>execute:42<span class="token punctuation">]</span> <span class="token punctuation">[</span>Attach Listener<span class="token punctuation">]</span> ---------- PLUGINS ----------
xxxx-xx-xx xx:xx:xx.xxx <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>io.sermant.core.command.CheckEnhancementsCommandExecutor<span class="token punctuation">]</span> <span class="token punctuation">[</span>execute:44<span class="token punctuation">]</span> <span class="token punctuation">[</span>Attach Listener<span class="token punctuation">]</span> test-plugin-A:1.0.0
xxxx-xx-xx xx:xx:xx.xxx <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>io.sermant.core.command.CheckEnhancementsCommandExecutor<span class="token punctuation">]</span> <span class="token punctuation">[</span>execute:44<span class="token punctuation">]</span> <span class="token punctuation">[</span>Attach Listener<span class="token punctuation">]</span> test-plugin-B:1.0.0
xxxx-xx-xx xx:xx:xx.xxx <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>io.sermant.core.command.CheckEnhancementsCommandExecutor<span class="token punctuation">]</span> <span class="token punctuation">[</span>execute:46<span class="token punctuation">]</span> <span class="token punctuation">[</span>Attach Listener<span class="token punctuation">]</span> ---------- ENHANCEMENT ----------
xxxx-xx-xx xx:xx:xx.xxx <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>io.sermant.core.command.CheckEnhancementsCommandExecutor<span class="token punctuation">]</span> <span class="token punctuation">[</span>execute:58<span class="token punctuation">]</span> <span class="token punctuation">[</span>Attach Listener<span class="token punctuation">]</span> test-plugin-A:1.0.0
xxxx-xx-xx xx:xx:xx.xxx <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>io.sermant.core.command.CheckEnhancementsCommandExecutor<span class="token punctuation">]</span> <span class="token punctuation">[</span>execute:65<span class="token punctuation">]</span> <span class="token punctuation">[</span>Attach Listener<span class="token punctuation">]</span> xxxxx.xxxx.TestClassA<span class="token comment">#testFunctionA(boolean,java.lang.String,java.lang.String,java.lang.String)@sun.misc.Launcher$AppClassLoader@5c647e05 [xxxx.xxxx.TestInterceptorA]</span>
xxxx-xx-xx xx:xx:xx.xxx <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>io.sermant.core.command.CheckEnhancementsCommandExecutor<span class="token punctuation">]</span> <span class="token punctuation">[</span>execute:65<span class="token punctuation">]</span> <span class="token punctuation">[</span>Attach Listener<span class="token punctuation">]</span> xxxxx.xxxx.TestClassB<span class="token comment">#testFunctionB(boolean,java.lang.String,java.lang.String,java.lang.String)@sun.misc.Launcher$AppClassLoader@5c647e05 [xxxx.xxxx.TestInterceptorB,xxxx.xxxx.TestInterceptorC]</span>
</code></pre></div><p>The format of the printed content is as follows:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>---------- PLUGINS ----------
<span class="token punctuation">\</span><span class="token punctuation">\</span> List of installed plugins, formatted as: PluginName: PluginVersion
test-plugin-A:1.0.0
test-plugin-B:1.0.0
---------- ENHANCEMENT ----------
<span class="token punctuation">\</span><span class="token punctuation">\</span> Plugins that successfully completed enhancement processing, formatted as: PluginName: PluginVersion
test-plugin-A:1.0.0
<span class="token punctuation">\</span><span class="token punctuation">\</span> Information on plugins that successfully completed enhancement processing:
<span class="token punctuation">\</span><span class="token punctuation">\</span> Formatted as: EnhancedFullQualifiedClassName<span class="token comment">#EnhancedMethodName(ParameterType)@ClassLoaderInformation [InterceptorList]</span>
xxxxx.xxxx.TestClassA<span class="token comment">#testFunctionA(boolean,java.lang.String,java.lang.String,java.lang.String)@sun.misc.Launcher$AppClassLoader@5c647e05 [xxxx.xxxx.TestInterceptorA]</span>
xxxxx.xxxx.TestClassB<span class="token comment">#testFunctionB(boolean,java.lang.String,java.lang.String,java.lang.String)@sun.misc.Launcher$AppClassLoader@5c647e05 [xxxx.xxxx.TestInterceptorB,xxxx.xxxx.TestInterceptorC]</span>
</code></pre></div><h2 id="sermant-command-instructions"><a href="#sermant-command-instructions" class="header-anchor">#</a> Sermant Command Instructions</h2> <p>Sermant can achieve hot-plugging capabilities by running <code>AgentLoader</code> and passing in the following commands. Additionally, after Sermant Agent has been successfully started by any method, you can run <code>AgentLoader</code> and pass in commands to query enhancement information. The specific commands are as follows:</p> <table><thead><tr><th>Command Type</th> <th>Command Example</th></tr></thead> <tbody><tr><td>Agent Installation</td> <td>If the command is empty, it defaults to Agent installation.</td></tr> <tr><td>Agent Uninstallation</td> <td>command=UNINSTALL-AGENT</td></tr> <tr><td>Plugin Installation</td> <td>command=INSTALL-PLUGINS:${PluginName}</td></tr> <tr><td>Plugin Uninstallation</td> <td>command=UNINSTALL-PLUGINS:${PluginName}</td></tr> <tr><td>Repeated Plugin Installation</td> <td>command=INSTALL-PLUGINS:${PluginName}#${CustomPluginIdentifier}</td></tr> <tr><td>Enhancement Information Query</td> <td>command=CHECK_ENHANCEMENT</td></tr></tbody></table> <h2 id="configuration-specifications"><a href="#configuration-specifications" class="header-anchor">#</a> Configuration Specifications</h2> <p>The properties configuration files of the Sermant project and the YAML configuration files of each plugin support the following parameter configuration methods. For example, in the configuration file, <code>gateway.nettyIp=127.0.0.1</code>:</p> <ol><li>Directly modify the configuration file by changing <code>gateway.nettyIp=127.0.0.1</code> in the file.</li> <li>Configure it via the -D parameter when starting the microservice, i.e., <code>-Dgateway.nettyIp=127.0.0.1</code>.</li> <li>Configure it via an environment variable by adding <code>gateway.nettyIp=127.0.0.1</code> to the environment variables.</li> <li>Configure it via Sermant Agent startup parameters, i.e., <code>-javaagent:sermant-agent.jar=gateway.nettyIp=127.0.0.1</code>.</li></ol> <p>The four methods listed above, arranged in order of priority from highest to lowest, are: 4 &gt; 3 &gt; 2 &gt; 1.</p> <p>Among these, the values for the last three parameter configuration methods support multiple formats. For example, for <code>gateway.nettyIp=127.0.0.1</code> in the configuration file, the following formats are all recognizable:</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">gateway.nettyIp</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">gateway_nettyIp</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">gateway-nettyIp</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">GATEWAY.NETTYIP</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">GATEWAY_NETTYIP</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">GATEWAY-NETTYIP</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">gateway.nettyip</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">gateway_nettyip</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">gateway-nettyip</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">gateway.netty.ip</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">gateway_netty_ip</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">gateway-netty-ip</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">GATEWAY.NETTY.IP</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">GATEWAY_NETTY_IP</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">GATEWAY-NETTY-IP</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
</code></pre></div><p>The Sermant Agent will sequentially check each configuration value from top to bottom to see if it is configured via startup parameters, environment variables, or -D parameters.</p> <blockquote><p><strong>Note:</strong> When modifying configurations through container scenarios using <code>env</code>, replace point (.) with underscore (_).</p> <p>Reason: Some OS images cannot recognize <code>env</code> variables with point.</p></blockquote> <p>For example：To modify the configuration <code>gateway.nettyIp=127.0.0.1</code> through the pod's <code>env</code>, use:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>  <span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;gateway_nettyIp&quot;</span>
    <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">&quot;127.0.0.2&quot;</span>
</code></pre></div><h2 id="attachments"><a href="#attachments" class="header-anchor">#</a> Attachments</h2> <h3 id="agentloader-java"><a href="#agentloader-java" class="header-anchor">#</a> AgentLoader.java</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>attach<span class="token punctuation">.</span></span><span class="token class-name">AgentInitializationException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>attach<span class="token punctuation">.</span></span><span class="token class-name">AgentLoadException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>attach<span class="token punctuation">.</span></span><span class="token class-name">AttachNotSupportedException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>attach<span class="token punctuation">.</span></span><span class="token class-name">VirtualMachine</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>attach<span class="token punctuation">.</span></span><span class="token class-name">VirtualMachineDescriptor</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">BufferedReader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStreamReader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AgentLoader</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AgentLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * AgentLoader main method
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">AttachNotSupportedException</span><span class="token punctuation">,</span> <span class="token class-name">AgentLoadException</span><span class="token punctuation">,</span> <span class="token class-name">AgentInitializationException</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VirtualMachineDescriptor</span><span class="token punctuation">&gt;</span></span> vmDescriptors <span class="token operator">=</span> <span class="token class-name">VirtualMachine</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>vmDescriptors<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;not find Java process&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Please select the Java process you wish to use with Sermant Agent: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vmDescriptors<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">VirtualMachineDescriptor</span> descriptor <span class="token operator">=</span> vmDescriptors<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> descriptor<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> descriptor<span class="token punctuation">.</span><span class="token function">displayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Read the user-inputted number</span>
        <span class="token class-name">BufferedReader</span> userInputReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Please enter the Java process number you wish to use with Sermant Agent: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> selectedProcessIndex <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>userInputReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>selectedProcessIndex <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> selectedProcessIndex <span class="token operator">&gt;=</span> vmDescriptors<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid process ID&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Connect to the selected virtual machine</span>
        <span class="token class-name">VirtualMachineDescriptor</span> selectedDescriptor <span class="token operator">=</span> vmDescriptors<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>selectedProcessIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;The process ID you selected: &quot;</span> <span class="token operator">+</span> selectedDescriptor<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">VirtualMachine</span> vm <span class="token operator">=</span> <span class="token class-name">VirtualMachine</span><span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>selectedDescriptor<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Get the Sermant Agent directory</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Please enter the directory where Sermant Agent is located (by default, it uses sermant-agent.jar in this directory as the entry point): &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> agentPath <span class="token operator">=</span> userInputReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Get the parameters passed to the Sermant Agent</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Please enter the parameters to pass to Sermant Agent (can be empty, default configuration parameter is agentPath):&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> agentArgs <span class="token operator">=</span> <span class="token string">&quot;agentPath=&quot;</span> <span class="token operator">+</span> agentPath <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> userInputReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Close resource</span>
        userInputReader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Start Sermant Agent</span>
        vm<span class="token punctuation">.</span><span class="token function">loadAgent</span><span class="token punctuation">(</span>agentPath <span class="token operator">+</span> <span class="token string">&quot;/sermant-agent.jar&quot;</span><span class="token punctuation">,</span> agentArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        vm<span class="token punctuation">.</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/6/2024, 9:55:26 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/document/user-guide/" class="prev router-link-active">
        Introduction to the use of Sermant
      </a></span> <span class="next"><a href="/en/document/user-guide/sermant-backend.html">
        Sermant Backend User Manual
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.df8eddc2.js" defer></script><script src="/assets/js/3.06f127bc.js" defer></script><script src="/assets/js/1.c8bacf5b.js" defer></script><script src="/assets/js/62.4125fce4.js" defer></script><script src="/assets/js/14.199c38f6.js" defer></script>
  </body>
</html>
