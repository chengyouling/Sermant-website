<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Plugin Configuration | Sermant</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/logo.svg">
    <meta name="description" content="A Proxyless Service Mesh based on Bytecode Enhancement">
    
    <link rel="preload" href="/assets/css/0.styles.b3162cc2.css" as="style"><link rel="preload" href="/assets/js/app.9f1d7790.js" as="script"><link rel="preload" href="/assets/js/3.5623409f.js" as="script"><link rel="preload" href="/assets/js/1.b15421ba.js" as="script"><link rel="preload" href="/assets/js/32.9179c939.js" as="script"><link rel="prefetch" href="/assets/js/10.cfbef995.js"><link rel="prefetch" href="/assets/js/100.1a83f88d.js"><link rel="prefetch" href="/assets/js/101.3eedcd7b.js"><link rel="prefetch" href="/assets/js/102.b5e09321.js"><link rel="prefetch" href="/assets/js/103.2dd18e5f.js"><link rel="prefetch" href="/assets/js/104.442505cf.js"><link rel="prefetch" href="/assets/js/105.ee4514a0.js"><link rel="prefetch" href="/assets/js/106.846fd371.js"><link rel="prefetch" href="/assets/js/107.d4b84b60.js"><link rel="prefetch" href="/assets/js/108.0909028f.js"><link rel="prefetch" href="/assets/js/109.d625ca1d.js"><link rel="prefetch" href="/assets/js/11.60305907.js"><link rel="prefetch" href="/assets/js/110.3fdc62e2.js"><link rel="prefetch" href="/assets/js/111.ef8cbe48.js"><link rel="prefetch" href="/assets/js/112.786e00d4.js"><link rel="prefetch" href="/assets/js/113.3a6cd601.js"><link rel="prefetch" href="/assets/js/114.0cd0adff.js"><link rel="prefetch" href="/assets/js/12.34d38cf9.js"><link rel="prefetch" href="/assets/js/13.86a0f1e9.js"><link rel="prefetch" href="/assets/js/14.095e6b30.js"><link rel="prefetch" href="/assets/js/15.e73a6d7c.js"><link rel="prefetch" href="/assets/js/16.fec41699.js"><link rel="prefetch" href="/assets/js/17.f476faab.js"><link rel="prefetch" href="/assets/js/18.f406bc1c.js"><link rel="prefetch" href="/assets/js/19.ca964182.js"><link rel="prefetch" href="/assets/js/20.9066a7e1.js"><link rel="prefetch" href="/assets/js/21.641c7801.js"><link rel="prefetch" href="/assets/js/22.9a7f3465.js"><link rel="prefetch" href="/assets/js/23.97cb668f.js"><link rel="prefetch" href="/assets/js/24.c2865696.js"><link rel="prefetch" href="/assets/js/25.ece41e63.js"><link rel="prefetch" href="/assets/js/26.7b323e16.js"><link rel="prefetch" href="/assets/js/27.6dcf2105.js"><link rel="prefetch" href="/assets/js/28.3a71d01d.js"><link rel="prefetch" href="/assets/js/29.b0ddb50b.js"><link rel="prefetch" href="/assets/js/30.29bbec41.js"><link rel="prefetch" href="/assets/js/31.94f98f6a.js"><link rel="prefetch" href="/assets/js/33.cebc78f2.js"><link rel="prefetch" href="/assets/js/34.06c41d07.js"><link rel="prefetch" href="/assets/js/35.6e9d2175.js"><link rel="prefetch" href="/assets/js/36.0659e1c9.js"><link rel="prefetch" href="/assets/js/37.9ee0a8bf.js"><link rel="prefetch" href="/assets/js/38.c799c1e9.js"><link rel="prefetch" href="/assets/js/39.eda52258.js"><link rel="prefetch" href="/assets/js/4.1f7cf31c.js"><link rel="prefetch" href="/assets/js/40.178bf55f.js"><link rel="prefetch" href="/assets/js/41.e3b351a9.js"><link rel="prefetch" href="/assets/js/42.aa7440af.js"><link rel="prefetch" href="/assets/js/43.22c3a611.js"><link rel="prefetch" href="/assets/js/44.bea27146.js"><link rel="prefetch" href="/assets/js/45.0bb4b5a0.js"><link rel="prefetch" href="/assets/js/46.97fbea63.js"><link rel="prefetch" href="/assets/js/47.e3c0e87b.js"><link rel="prefetch" href="/assets/js/48.e2216aa1.js"><link rel="prefetch" href="/assets/js/49.542faebd.js"><link rel="prefetch" href="/assets/js/5.27b946c4.js"><link rel="prefetch" href="/assets/js/50.eec0fcc8.js"><link rel="prefetch" href="/assets/js/51.36e67330.js"><link rel="prefetch" href="/assets/js/52.cd80e161.js"><link rel="prefetch" href="/assets/js/53.6105c07a.js"><link rel="prefetch" href="/assets/js/54.7551e07a.js"><link rel="prefetch" href="/assets/js/55.0485f657.js"><link rel="prefetch" href="/assets/js/56.5e4c4198.js"><link rel="prefetch" href="/assets/js/57.5c974e62.js"><link rel="prefetch" href="/assets/js/58.a1110b96.js"><link rel="prefetch" href="/assets/js/59.715330b7.js"><link rel="prefetch" href="/assets/js/6.a6913bc1.js"><link rel="prefetch" href="/assets/js/60.4a0c70d2.js"><link rel="prefetch" href="/assets/js/61.48be7856.js"><link rel="prefetch" href="/assets/js/62.b66cd57e.js"><link rel="prefetch" href="/assets/js/63.3bf5da9f.js"><link rel="prefetch" href="/assets/js/64.5c87a987.js"><link rel="prefetch" href="/assets/js/65.454a0222.js"><link rel="prefetch" href="/assets/js/66.1d907639.js"><link rel="prefetch" href="/assets/js/67.3bf031f0.js"><link rel="prefetch" href="/assets/js/68.f23d7700.js"><link rel="prefetch" href="/assets/js/69.db808a64.js"><link rel="prefetch" href="/assets/js/7.d018164a.js"><link rel="prefetch" href="/assets/js/70.ae68765e.js"><link rel="prefetch" href="/assets/js/71.0dfbb3ed.js"><link rel="prefetch" href="/assets/js/72.b197b453.js"><link rel="prefetch" href="/assets/js/73.a14aa5c0.js"><link rel="prefetch" href="/assets/js/74.f81b17b5.js"><link rel="prefetch" href="/assets/js/75.202cac83.js"><link rel="prefetch" href="/assets/js/76.ad81da3b.js"><link rel="prefetch" href="/assets/js/77.f806eb9a.js"><link rel="prefetch" href="/assets/js/78.fcbd0aa6.js"><link rel="prefetch" href="/assets/js/79.61af2601.js"><link rel="prefetch" href="/assets/js/8.10750ce9.js"><link rel="prefetch" href="/assets/js/80.e7003560.js"><link rel="prefetch" href="/assets/js/81.02d240b7.js"><link rel="prefetch" href="/assets/js/82.ba92673b.js"><link rel="prefetch" href="/assets/js/83.75153477.js"><link rel="prefetch" href="/assets/js/84.e0e51527.js"><link rel="prefetch" href="/assets/js/85.2692d845.js"><link rel="prefetch" href="/assets/js/86.88f0e72a.js"><link rel="prefetch" href="/assets/js/87.d0423727.js"><link rel="prefetch" href="/assets/js/88.4091d482.js"><link rel="prefetch" href="/assets/js/89.9c641592.js"><link rel="prefetch" href="/assets/js/9.4d2ce84a.js"><link rel="prefetch" href="/assets/js/90.7009bcbf.js"><link rel="prefetch" href="/assets/js/91.3617cc72.js"><link rel="prefetch" href="/assets/js/92.d5c4781c.js"><link rel="prefetch" href="/assets/js/93.5c15a2b6.js"><link rel="prefetch" href="/assets/js/94.510f5827.js"><link rel="prefetch" href="/assets/js/95.3cadcd1a.js"><link rel="prefetch" href="/assets/js/96.3d5a7e8a.js"><link rel="prefetch" href="/assets/js/97.a9a67bb3.js"><link rel="prefetch" href="/assets/js/98.5353c6f2.js"><link rel="prefetch" href="/assets/js/99.bbcb6377.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b3162cc2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><img src="/img/sermant-logo.png" alt="Sermant" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/document/" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/sermant-io/Sermant" target="_blank" class="nav-link external">
  Github
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/document/developer-guide/plugin-configuration.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en/document/developer-guide/plugin-configuration.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <div class="nav-item"><!----></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/document/" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/sermant-io/Sermant" target="_blank" class="nav-link external">
  Github
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/document/developer-guide/plugin-configuration.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en/document/developer-guide/plugin-configuration.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <div class="nav-item"><!----></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Start</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>User Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Plugin Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Developer Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/document/developer-guide/" aria-current="page" class="sidebar-link">Create Your First Plugin</a></li><li><a href="/en/document/developer-guide/bytecode-enhancement.html" class="sidebar-link">Bytecode Enhancement</a></li><li><a href="/en/document/developer-guide/package-structure.html" class="sidebar-link">Plugin Structure</a></li><li><a href="/en/document/developer-guide/plugin-configuration.html" aria-current="page" class="active sidebar-link">Plugin Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/document/developer-guide/plugin-configuration.html#function-introduction" class="sidebar-link">Function Introduction</a></li><li class="sidebar-sub-header"><a href="/en/document/developer-guide/plugin-configuration.html#development-examples" class="sidebar-link">Development Examples</a></li><li class="sidebar-sub-header"><a href="/en/document/developer-guide/plugin-configuration.html#api-configuration" class="sidebar-link">API&amp;Configuration</a></li></ul></li><li><a href="/en/document/developer-guide/dynamic-config-func.html" class="sidebar-link">Dynamic Configuration Function</a></li><li><a href="/en/document/developer-guide/sermant-xds-service.html" class="sidebar-link">xDS Service</a></li><li><a href="/en/document/developer-guide/heartbeat-func.html" class="sidebar-link">Heartbeat Function</a></li><li><a href="/en/document/developer-guide/trace-tracking-func.html" class="sidebar-link">Link Function</a></li><li><a href="/en/document/developer-guide/log-func.html" class="sidebar-link">Logging Function</a></li><li><a href="/en/document/developer-guide/third-party-copyright.html" class="sidebar-link">Third Party Copyright Statement</a></li><li><a href="/en/document/developer-guide/version-manage.html" class="sidebar-link">Version Management</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Community Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>FAQ</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="plugin-configuration"><a href="#plugin-configuration" class="header-anchor">#</a> Plugin Configuration</h1> <p>This document describes how to define a configuration item in the plugin and use the configuration item in the plugin. This article is only for static configuration. If you need to use the dynamic configuration item, see <a href="/en/document/developer-guide/dynamic-config-func.html">Dynamic Configuration</a>.</p> <h2 id="function-introduction"><a href="#function-introduction" class="header-anchor">#</a> Function Introduction</h2> <p>Plugin configuration allows plugin developers to specify some variable amount of plugin deployment through the configuration file, improve the flexibility of plugin development, and configure different values for these variables in different deployment environments to adapt to different .</p> <blockquote><p><strong>Note</strong>：
If you modify the configuration file when the service is running, you need to restart the service to obtain the modified configuration content.</p></blockquote> <h2 id="development-examples"><a href="#development-examples" class="header-anchor">#</a> Development Examples</h2> <p>This development example is based on <a href="/en/document/developer-guide/" class="router-link-active">Create first plugin</a> document to create the project.</p> <p>Add the following to the <code>config.yaml</code> file in the <code>template\config</code> directory：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">template.config</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable-dynamic-config</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> 127.0.0.1
</code></pre></div><p>Define a plugin configuration class under the <code>template\template-plugin</code> project. It needs to inherit the <a href="https://github.com/sermant-io/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/io/sermant/core/plugin/config/PluginConfig.java" target="_blank" rel="noopener noreferrer">PluginConfig<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> plugin configuration interface, and specify the <a href="https://github.com/sermant-io/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/io/sermant/core/config/common/ConfigTypeKey.java" target="_blank" rel="noopener noreferrer">ConfigTypeKey<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> class to read the prefix of the configuration. Specify the name of the configuration for this variable by decorating the variable in the class with <a href="https://github.com/sermant-io/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/io/sermant/core/config/common/ConfigFieldKey.java" target="_blank" rel="noopener noreferrer">ConfigFieldKey<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (or, if not, reading the configuration with the same name as the variable).</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ConfigTypeKey</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;template.config&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TemplateConfig</span> <span class="token keyword">implements</span> <span class="token class-name">PluginConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ConfigFieldKey</span><span class="token punctuation">(</span><span class="token string">&quot;enable-dynamic-config&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> enableDynamicConfig<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> host<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEnableDynamicConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> enableDynamicConfig<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEnableDynamicConfig</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> enableDynamicConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>enableDynamicConfig <span class="token operator">=</span> enableDynamicConfig<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> host<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHost</span><span class="token punctuation">(</span><span class="token class-name">String</span> host<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>host <span class="token operator">=</span> host<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For <code>main</code> method of the interceptor <code>before</code> method through <a href="https://github.com/sermant-io/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/io/sermant/core/plugin/config/PluginConfigManager.java" target="_blank" rel="noopener noreferrer">io.sermant.core.plugin.config.PluginConfigManager<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> get configuration instance, content and output configuration.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">ExecuteContext</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">ExecuteContext</span> context<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">TemplateConfig</span> templateConfig <span class="token operator">=</span> <span class="token class-name">PluginConfigManager</span><span class="token punctuation">.</span><span class="token function">getPluginConfig</span><span class="token punctuation">(</span><span class="token class-name">TemplateConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>templateConfig<span class="token punctuation">.</span><span class="token function">isEnableDynamicConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>templateConfig<span class="token punctuation">.</span><span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Good morning!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> context<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Finally, don't forget to add the <strong>SPI</strong> profile of the plugin configuration:</p> <ul><li>In engineering <code>template\template-plugin module</code> under <code>src\main\resources\META-INF\services</code> directory to add  <code>io.sermant.core.plugin.config.PluginConfig</code> configuration file.</li> <li>Add <code>com.huaweicloud.sermant.template.TemplateConfig</code> to <code>io.sermant.core.plugin.config.PluginConfig</code> file.</li></ul> <p>After the development is completed, you can refer to the packaging construction process when creating the first plugin, execute <code>mvn package</code> in the project root directory, and execute <code>cd agent/</code> in the root directory after completion, and run the test application with Sermant in it. Execute the command <code>java-javaagent: sermant-agent.jar-jar Application.jar</code>. The console output is as follows:</p> <div class="language-log extra-class"><pre class="language-log"><code><span class="token punctuation">[</span>xxxx<span class="token operator">-</span>xx<span class="token operator">-</span>xxTxx<span class="token operator">:</span>xx<span class="token operator">:</span>xx<span class="token punctuation">.</span>xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span> Loading god library into BootstrapClassLoader<span class="token punctuation">.</span>
<span class="token punctuation">[</span>xxxx<span class="token operator">-</span>xx<span class="token operator">-</span>xxTxx<span class="token operator">:</span>xx<span class="token operator">:</span>xx<span class="token punctuation">.</span>xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span> Building argument map by agent arguments<span class="token punctuation">.</span>
<span class="token punctuation">[</span>xxxx<span class="token operator">-</span>xx<span class="token operator">-</span>xxTxx<span class="token operator">:</span>xx<span class="token operator">:</span>xx<span class="token punctuation">.</span>xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span> Loading core library into SermantClassLoader<span class="token punctuation">.</span>
<span class="token punctuation">[</span>xxxx<span class="token operator">-</span>xx<span class="token operator">-</span>xxTxx<span class="token operator">:</span>xx<span class="token operator">:</span>xx<span class="token punctuation">.</span>xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span> Loading sermant agent<span class="token punctuation">,</span> artifact is<span class="token operator">:</span> default
<span class="token punctuation">[</span>xxxx<span class="token operator">-</span>xx<span class="token operator">-</span>xxTxx<span class="token operator">:</span>xx<span class="token operator">:</span>xx<span class="token punctuation">.</span>xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token level info keyword">INFO</span><span class="token punctuation">]</span> Load sermant done<span class="token punctuation">,</span> artifact is<span class="token operator">:</span> default
<span class="token boolean">false</span>
<span class="token ip-address constant">127.0.0.1</span>
Good morning<span class="token operator">!</span>
Good afternoon<span class="token operator">!</span>
Good night<span class="token operator">!</span>
</code></pre></div><p>You can see that in the plugin, we have already obtained the configuration information that we have in the configuration file.</p> <h2 id="api-configuration"><a href="#api-configuration" class="header-anchor">#</a> API&amp;Configuration</h2> <h3 id="api"><a href="#api" class="header-anchor">#</a> API</h3> <h4 id="get-configuration-example"><a href="#get-configuration-example" class="header-anchor">#</a> Get Configuration Example</h4> <p>Gets a configuration instance to get what was configured in the <em>yaml</em> file during plugin usage. The configuration instance is created when the framework is initialized, and the plugin can be used directly.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// ${plugin config class} is the Class configured by the plugin</span>
<span class="token class-name">PluginConfigManager</span><span class="token punctuation">.</span><span class="token function">getPluginConfig</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span>plugin config <span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h3> <p>The data types now supported by the plugin configuration include:</p> <ul><li>Basic types and packaging types of Boolean and numerical classes</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">template.config</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable-dynamic-config</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">num</span><span class="token punctuation">:</span> <span class="token number">11</span>
  <span class="token key atrule">rate</span><span class="token punctuation">:</span> <span class="token number">11.11</span>
</code></pre></div><ul><li>String type</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">template.config</span><span class="token punctuation">:</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> 127.0.0.1
</code></pre></div><ul><li>Enumeration type</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">template.config</span><span class="token punctuation">:</span>
  <span class="token key atrule">status</span><span class="token punctuation">:</span> UP
</code></pre></div><ul><li>Complex object type</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">template.config</span><span class="token punctuation">:</span>
  <span class="token key atrule">teacher</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Mr. Wang
    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">48</span>
  <span class="token key atrule">student</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Xiao Li
    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">12</span>
</code></pre></div><ul><li>An array of the above types</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">template.config</span><span class="token punctuation">:</span>
  <span class="token key atrule">arrayValue</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> January
    <span class="token punctuation">-</span> February
</code></pre></div><ul><li>The first four types form a <em>List</em></li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">template.config</span><span class="token punctuation">:</span>
  <span class="token key atrule">listValue</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> NewYork
    <span class="token punctuation">-</span> <span class="token number">12</span>
    <span class="token punctuation">-</span> 127.0.0.1
</code></pre></div><ul><li>The first four types form a <em>Map</em></li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">template.config</span><span class="token punctuation">:</span>
  <span class="token key atrule">mapValue</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Xiao Li
    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">12</span>
</code></pre></div><blockquote><p><strong>Note</strong>：</p> <ul><li>The priority for the configuration to take effect: Startup Parameters &gt; Environment Variables &gt; System Variables (-D parameter) &gt; <em>yaml</em> file configuration.</li> <li>The field names of configuration classes are typically small camel cases.You can use the <a href="https://github.com/sermant-io/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/io/sermant/core/config/common/ConfigFieldKey.java" target="_blank" rel="noopener noreferrer">ConfigFieldKey<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> annotation to define aliases with underscores. Note:
<ul><li>After adding annotation, you can parse using a hyphen or small hump in <em>yaml</em>.</li> <li><a href="https://github.com/sermant-io/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/io/sermant/core/config/common/ConfigFieldKey.java" target="_blank" rel="noopener noreferrer">ConfigFieldKey<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> fixing property names is not supported for complex objects involved in arrays, lists, and maps.</li></ul></li> <li>String properties inside the <strong>plug-in configuration class</strong> and complex type properties support <code>${}</code> to get property values set in startup parameters, environment variables, or system variables (-D arguments). Strings in arrays, lists, and maps do not support obtaining property values by <code>${}</code>.</li> <li>If the attributes of the plugin configuration class are not defined in the <em>yaml</em> configuration file, the attribute values are obtained based on the priority at which the configuration takes effect. When obtaining attribute values, note:
<ul><li>Only basic data types, arrays, maps, lists, and sets are supported. Complex objects are not supported.</li> <li>Array, list, set should be configured in <code>yaml</code> string format, e.g. LIST_NAME=[elem1, elem2].</li> <li>Map must be in yaml string format, e.g. MAP_NAME={key1: value1, key2: value2}.</li></ul></li></ul></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/10/2024, 10:16:06 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/document/developer-guide/package-structure.html" class="prev">
        Plugin Structure
      </a></span> <span class="next"><a href="/en/document/developer-guide/dynamic-config-func.html">
        Dynamic Configuration Function
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.9f1d7790.js" defer></script><script src="/assets/js/3.5623409f.js" defer></script><script src="/assets/js/1.b15421ba.js" defer></script><script src="/assets/js/32.9179c939.js" defer></script>
  </body>
</html>
