<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Service visibility | Sermant</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/logo.svg">
    <meta name="description" content="A Proxyless Service Mesh based on Bytecode Enhancement">
    
    <link rel="preload" href="/assets/css/0.styles.b3162cc2.css" as="style"><link rel="preload" href="/assets/js/app.4d973b6e.js" as="script"><link rel="preload" href="/assets/js/3.5623409f.js" as="script"><link rel="preload" href="/assets/js/1.b15421ba.js" as="script"><link rel="preload" href="/assets/js/55.a28f3ac8.js" as="script"><link rel="prefetch" href="/assets/js/10.412d4e3b.js"><link rel="prefetch" href="/assets/js/100.36287687.js"><link rel="prefetch" href="/assets/js/101.5d40e772.js"><link rel="prefetch" href="/assets/js/102.5e81121a.js"><link rel="prefetch" href="/assets/js/103.ea0292bd.js"><link rel="prefetch" href="/assets/js/104.97dd385b.js"><link rel="prefetch" href="/assets/js/105.5e4b135a.js"><link rel="prefetch" href="/assets/js/106.29528da8.js"><link rel="prefetch" href="/assets/js/107.52d88da2.js"><link rel="prefetch" href="/assets/js/108.cc9f2193.js"><link rel="prefetch" href="/assets/js/109.8ee7c57c.js"><link rel="prefetch" href="/assets/js/11.60305907.js"><link rel="prefetch" href="/assets/js/110.03df04e4.js"><link rel="prefetch" href="/assets/js/12.34d38cf9.js"><link rel="prefetch" href="/assets/js/13.86a0f1e9.js"><link rel="prefetch" href="/assets/js/14.22d7ba73.js"><link rel="prefetch" href="/assets/js/15.e73a6d7c.js"><link rel="prefetch" href="/assets/js/16.fec41699.js"><link rel="prefetch" href="/assets/js/17.f476faab.js"><link rel="prefetch" href="/assets/js/18.f406bc1c.js"><link rel="prefetch" href="/assets/js/19.a75ad99f.js"><link rel="prefetch" href="/assets/js/20.b657f769.js"><link rel="prefetch" href="/assets/js/21.a73549a1.js"><link rel="prefetch" href="/assets/js/22.bbd7861b.js"><link rel="prefetch" href="/assets/js/23.8877622b.js"><link rel="prefetch" href="/assets/js/24.c2865696.js"><link rel="prefetch" href="/assets/js/25.ece41e63.js"><link rel="prefetch" href="/assets/js/26.7b323e16.js"><link rel="prefetch" href="/assets/js/27.6dcf2105.js"><link rel="prefetch" href="/assets/js/28.3a71d01d.js"><link rel="prefetch" href="/assets/js/29.b0ddb50b.js"><link rel="prefetch" href="/assets/js/30.29bbec41.js"><link rel="prefetch" href="/assets/js/31.94f98f6a.js"><link rel="prefetch" href="/assets/js/32.9179c939.js"><link rel="prefetch" href="/assets/js/33.40565414.js"><link rel="prefetch" href="/assets/js/34.f35ece3c.js"><link rel="prefetch" href="/assets/js/35.6e9d2175.js"><link rel="prefetch" href="/assets/js/36.0659e1c9.js"><link rel="prefetch" href="/assets/js/37.fe0adbf9.js"><link rel="prefetch" href="/assets/js/38.393b95aa.js"><link rel="prefetch" href="/assets/js/39.fe9d7002.js"><link rel="prefetch" href="/assets/js/4.1f7cf31c.js"><link rel="prefetch" href="/assets/js/40.ee8395fd.js"><link rel="prefetch" href="/assets/js/41.fb2c5773.js"><link rel="prefetch" href="/assets/js/42.70c74c21.js"><link rel="prefetch" href="/assets/js/43.27c5199c.js"><link rel="prefetch" href="/assets/js/44.e5a595d0.js"><link rel="prefetch" href="/assets/js/45.fffdb43b.js"><link rel="prefetch" href="/assets/js/46.125829bf.js"><link rel="prefetch" href="/assets/js/47.d7701f7f.js"><link rel="prefetch" href="/assets/js/48.becfaca8.js"><link rel="prefetch" href="/assets/js/49.949d8688.js"><link rel="prefetch" href="/assets/js/5.27b946c4.js"><link rel="prefetch" href="/assets/js/50.d6dda497.js"><link rel="prefetch" href="/assets/js/51.b59552e7.js"><link rel="prefetch" href="/assets/js/52.8cac51fc.js"><link rel="prefetch" href="/assets/js/53.58059201.js"><link rel="prefetch" href="/assets/js/54.d441ba3c.js"><link rel="prefetch" href="/assets/js/56.ab67750a.js"><link rel="prefetch" href="/assets/js/57.f48dab8c.js"><link rel="prefetch" href="/assets/js/58.7a27afb9.js"><link rel="prefetch" href="/assets/js/59.715330b7.js"><link rel="prefetch" href="/assets/js/6.a6913bc1.js"><link rel="prefetch" href="/assets/js/60.a2d742cf.js"><link rel="prefetch" href="/assets/js/61.c51a6afc.js"><link rel="prefetch" href="/assets/js/62.b684c647.js"><link rel="prefetch" href="/assets/js/63.ea984691.js"><link rel="prefetch" href="/assets/js/64.3fd248e8.js"><link rel="prefetch" href="/assets/js/65.1100ea94.js"><link rel="prefetch" href="/assets/js/66.1a8bda1e.js"><link rel="prefetch" href="/assets/js/67.6f6155e5.js"><link rel="prefetch" href="/assets/js/68.c8c0fb72.js"><link rel="prefetch" href="/assets/js/69.4de30a49.js"><link rel="prefetch" href="/assets/js/7.d018164a.js"><link rel="prefetch" href="/assets/js/70.9e5a0757.js"><link rel="prefetch" href="/assets/js/71.36f3b7af.js"><link rel="prefetch" href="/assets/js/72.e50ae635.js"><link rel="prefetch" href="/assets/js/73.0f030593.js"><link rel="prefetch" href="/assets/js/74.e3968311.js"><link rel="prefetch" href="/assets/js/75.57f30bb1.js"><link rel="prefetch" href="/assets/js/76.093c5f1c.js"><link rel="prefetch" href="/assets/js/77.df0d28dc.js"><link rel="prefetch" href="/assets/js/78.c8a95aa2.js"><link rel="prefetch" href="/assets/js/79.49a05cff.js"><link rel="prefetch" href="/assets/js/8.10750ce9.js"><link rel="prefetch" href="/assets/js/80.4d18f840.js"><link rel="prefetch" href="/assets/js/81.8f1f8c2b.js"><link rel="prefetch" href="/assets/js/82.e3686f03.js"><link rel="prefetch" href="/assets/js/83.58614174.js"><link rel="prefetch" href="/assets/js/84.ac70465c.js"><link rel="prefetch" href="/assets/js/85.bd9007b9.js"><link rel="prefetch" href="/assets/js/86.6badcf74.js"><link rel="prefetch" href="/assets/js/87.8ef7f40c.js"><link rel="prefetch" href="/assets/js/88.9b66ae3e.js"><link rel="prefetch" href="/assets/js/89.11aa603d.js"><link rel="prefetch" href="/assets/js/9.4d2ce84a.js"><link rel="prefetch" href="/assets/js/90.5864c24e.js"><link rel="prefetch" href="/assets/js/91.70c87d10.js"><link rel="prefetch" href="/assets/js/92.6cc4b145.js"><link rel="prefetch" href="/assets/js/93.5cf3423e.js"><link rel="prefetch" href="/assets/js/94.42c69c23.js"><link rel="prefetch" href="/assets/js/95.35511a10.js"><link rel="prefetch" href="/assets/js/96.14e2c927.js"><link rel="prefetch" href="/assets/js/97.8070d3f8.js"><link rel="prefetch" href="/assets/js/98.c8ae0eda.js"><link rel="prefetch" href="/assets/js/99.5e2c9bb0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b3162cc2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><img src="/img/sermant-logo.png" alt="Sermant" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/document/" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/sermant-io/Sermant" target="_blank" class="nav-link external">
  Github
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/document/plugin/visibility.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en/document/plugin/visibility.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <div class="nav-item"><!----></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/document/" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/sermant-io/Sermant" target="_blank" class="nav-link external">
  Github
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/document/plugin/visibility.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en/document/plugin/visibility.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <div class="nav-item"><!----></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Start</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>User Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Plugin Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/document/plugin/" aria-current="page" class="sidebar-link">Plugin</a></li><li><a href="/en/document/plugin/dynamic-config.html" class="sidebar-link">Dynamic Configuration</a></li><li><a href="/en/document/plugin/springboot-registry.html" class="sidebar-link">SpringBoot Registry</a></li><li><a href="/en/document/plugin/register-migration.html" class="sidebar-link">Service-Registry</a></li><li><a href="/en/document/plugin/flowcontrol.html" class="sidebar-link">FlowControl</a></li><li><a href="/en/document/plugin/graceful.html" class="sidebar-link">Graceful Online/Offline</a></li><li><a href="/en/document/plugin/removal.html" class="sidebar-link">Outlier instance removal</a></li><li><a href="/en/document/plugin/loadbalancer.html" class="sidebar-link">Load balancing</a></li><li><a href="/en/document/plugin/router.html" class="sidebar-link">Tag Router</a></li><li><a href="/en/document/plugin/monitor.html" class="sidebar-link">Monitoring</a></li><li><a href="/en/document/plugin/visibility.html" aria-current="page" class="active sidebar-link">Service visibility</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/document/plugin/visibility.html#terminology" class="sidebar-link">Terminology</a></li><li class="sidebar-sub-header"><a href="/en/document/plugin/visibility.html#function-introduction" class="sidebar-link">Function introduction</a></li><li class="sidebar-sub-header"><a href="/en/document/plugin/visibility.html#parameter-configuration" class="sidebar-link">Parameter configuration</a></li><li class="sidebar-sub-header"><a href="/en/document/plugin/visibility.html#supported-versions-and-restrictions" class="sidebar-link">Supported versions and restrictions</a></li><li class="sidebar-sub-header"><a href="/en/document/plugin/visibility.html#operation-and-result-verification" class="sidebar-link">Operation and result verification</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Developer Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Community Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>FAQ</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="service-visibility"><a href="#service-visibility" class="header-anchor">#</a> Service visibility</h1> <p>This article describes how to use <a href="https://github.com/sermant-io/Sermant/tree/develop/sermant-plugins/sermant-service-visibility" target="_blank" rel="noopener noreferrer">Service Visibility Plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="terminology"><a href="#terminology" class="header-anchor">#</a> Terminology</h2> <table><thead><tr><th>Term</th> <th>Description</th></tr></thead> <tbody><tr><td>Contract information</td> <td>External interface information provided by the service, including the class of the interface, request path, method name, parameter list, and return type</td></tr> <tr><td>Blood relationship information</td> <td>Call relationship information between services, including IP and port information of service providers and service consumers</td></tr></tbody></table> <h2 id="function-introduction"><a href="#function-introduction" class="header-anchor">#</a> Function introduction</h2> <p>The service visibility plug-in can collect the contract information and blood relationship of Spring Cloud and Dubbo applications. Without modifying the code, you can view the interface information provided by all services and the call relationship information between services through backend.</p> <p>This plug-in completes the collection of interface information of service registration and provider information during service subscription based on the service registration, service subscription and other functions of Spring Cloud and Dubbo applications, so as to facilitate the unified management of users.</p> <h2 id="parameter-configuration"><a href="#parameter-configuration" class="header-anchor">#</a> Parameter configuration</h2> <h3 id="sermant-agent-configuration"><a href="#sermant-agent-configuration" class="header-anchor">#</a> Sermant agent configuration</h3> <p>The service visibility plugin needs to configure the heartbeat switch (<code>agent.service.heartbeat.enable</code>), gateway switch (<code>agent.service.gateway.enable</code>), notification switch (<code>notification.enable</code>), and service metadata (<code>service.meta.*</code>) in the configuration file <code>${path}/sermant-agent-x.x.x/agent/config/config.properties</code> of the Service Agent.</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">agent.service.heartbeat.enable</span><span class="token punctuation">=</span><span class="token value attr-value">false # Heartbeat switch, controls whether the heartbeat function is enabled. The visibility plugin relies on the heartbeat function to monitor whether the service is offline, and does not display the visibility information of the service when it is offline. It is disabled by default and needs to be set to true when used.</span>
<span class="token key attr-name">agent.service.gateway.enable</span><span class="token punctuation">=</span><span class="token value attr-value">false   # Gateway switch to control whether the message sending function is enabled. The visibility plugin relies on the message sending function. The plugin sends the collected information to Backend for display through the message sending function. It is disabled by default and needs to be set to true when used.</span>
<span class="token key attr-name">notification.enable</span><span class="token punctuation">=</span><span class="token value attr-value">false            # Notification switch, controls the switch for notifications such as Netty links. The visibility plugin relies on the notification of Netty links to listen for Netty reconnection. When Netty reconnects, the visibility plugin will resend the collected visibility data to Backend to prevent data loss caused by Backend restart. It is disabled by default and needs to be set to true when used.</span>
<span class="token key attr-name">service.meta.application</span><span class="token punctuation">=</span><span class="token value attr-value">default     # Specify the application name. The service visibility plugin collects this information for data display.</span>
<span class="token key attr-name">service.meta.version</span><span class="token punctuation">=</span><span class="token value attr-value">1.0.0           # Specify the service version. The service visibility plugin collects this information for data display.</span>
<span class="token key attr-name">service.meta.project</span><span class="token punctuation">=</span><span class="token value attr-value">default         # Specify the service namespace. The service visibility plugin collects this information for data display.</span>
<span class="token key attr-name">service.meta.environment</span><span class="token punctuation">=</span>            <span class="token value attr-value"># Specify the environment where the service is located. The service visibility plugin collects this information for data display.</span>
<span class="token key attr-name">service.meta.zone</span><span class="token punctuation">=</span>                   <span class="token value attr-value"># Specify the az (availability zone) where the service is located. The service visibility plugin collects this information for data display.</span>
</code></pre></div><h3 id="plug-in-configuration"><a href="#plug-in-configuration" class="header-anchor">#</a> Plug-in configuration</h3> <p>The service visibility plug-in needs to enable the collection switch. The configuration file of the plug-in can be found in the <code>${path}/sermant-agent-x.x.x/agent/pluginPackage/service-visibility/config/config.yaml</code>. The configuration is as follows:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">visibility.config</span><span class="token punctuation">:</span>
  <span class="token key atrule">startFlag</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>         <span class="token comment"># Service visibility collection switch. Control whether to collect and report indicators. If it is true, the plug-in will report data collection. If it is false, the plug-in will not report data collection.</span>
</code></pre></div><table><thead><tr><th style="text-align:center;">Parameter key</th> <th style="text-align:center;">Description</th> <th style="text-align:center;">Default value</th> <th style="text-align:center;">Required</th></tr></thead> <tbody><tr><td style="text-align:center;">visibility.config.startFlag</td> <td style="text-align:center;">Service visibility collection switch</td> <td style="text-align:center;">false</td> <td style="text-align:center;">Yes</td></tr></tbody></table> <h2 id="supported-versions-and-restrictions"><a href="#supported-versions-and-restrictions" class="header-anchor">#</a> Supported versions and restrictions</h2> <p>Framework support:</p> <ul><li>SpringBoot 1.5.10. Release and above</li> <li>Dubbo 2.6.x-2.7.x</li></ul> <h2 id="operation-and-result-verification"><a href="#operation-and-result-verification" class="header-anchor">#</a> Operation and result verification</h2> <p>The following will demonstrate how to use the service visibility plug-in.</p> <h3 id="preparations"><a href="#preparations" class="header-anchor">#</a> Preparations</h3> <ul><li><a href="https://github.com/sermant-io/Sermant/releases" target="_blank" rel="noopener noreferrer">Download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>compile Sermant package</li> <li><a href="https://github.com/sermant-io/Sermant-examples/releases/download/v1.2.1/sermant-examples-visibility-demo-1.2.1.tar.gz" target="_blank" rel="noopener noreferrer">Download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Demo binary product compressed package</li> <li><a href="https://zookeeper.apache.org/releases.html#download" target="_blank" rel="noopener noreferrer">Download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Zookeeper (Dynamic Configuration Center&amp;Registration Center) and launch</li></ul> <h3 id="step-1-modify-the-configuration"><a href="#step-1-modify-the-configuration" class="header-anchor">#</a> Step 1: Modify the configuration</h3> <ul><li>Modify the Sermant-agent configuration</li></ul> <p>Find the configuration file in the <code>${path}/sermant-agent-x.x.x/agent/config/config.properties</code>. The modified configuration items are as follows:</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">agent.service.heartbeat.enable</span><span class="token punctuation">=</span><span class="token value attr-value">true # Heartbeat service switch</span>
<span class="token key attr-name">agent.service.gateway.enable</span><span class="token punctuation">=</span><span class="token value attr-value">true   # Unified Gateway Service Switch</span>
<span class="token key attr-name">notification.enable</span><span class="token punctuation">=</span><span class="token value attr-value">true            # Internal event notification switch</span>
</code></pre></div><ul><li>Modify service visibility plug-in configuration</li></ul> <p>Find the configuration file of the plugin in the <code>${path}/sermant-agent-x.x.x/agent/pluginPackage/service-visibility/config/config. yaml</code>. The modified configuration items are as follows:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">visibility.config</span><span class="token punctuation">:</span>
  <span class="token key atrule">startFlag</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>           <span class="token comment"># Service visibility collection switch. If it is true, data collection and reporting will be performed.</span>
</code></pre></div><h3 id="step-2-compile-and-package-the-dubbo-test-application"><a href="#step-2-compile-and-package-the-dubbo-test-application" class="header-anchor">#</a> Step 2: compile and package the dubbo-test application</h3> <p>Execute the following command to package the subprojects dubbo-2-6-integration-consumer and dubbo-2-6-integration-provider in the dubbo-test project:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>mvn clean package
</code></pre></div><p>You can get the dubbo-integration-consumer.jar package in the <code>target</code> folder in the dubbo-2-6-integration-consumer project and the dubbo-integration-provider.jar package in the dubbo-2-6-integration-provider project .</p> <h3 id="step-3-start-the-application"><a href="#step-3-start-the-application" class="header-anchor">#</a> Step 3: Start the application</h3> <ul><li>Refer to the following command to start the backend application.</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Run under Linux</span>
<span class="token function">java</span> <span class="token parameter variable">-jar</span> <span class="token variable">${path}</span>/sermant-agent-x.x.x/server/sermant/sermant-backend-x.x.x.jar
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Run under Windows</span>
<span class="token function">java</span> <span class="token parameter variable">-jar</span> <span class="token variable">${path}</span><span class="token punctuation">\</span>sermant-agent-x.x.x<span class="token punctuation">\</span>server<span class="token punctuation">\</span>sermant<span class="token punctuation">\</span>sermant-backend-x.x.x.jar
</code></pre></div><ul><li>Refer to the following command to start the dubbo-2-6-integration-consumer application.</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Run under Linux</span>
<span class="token function">java</span> -javaagent:<span class="token variable">${path}</span>/sermant-agent-x.x.x/agent/sermant-agent.jar<span class="token operator">=</span>appName<span class="token operator">=</span>consumer <span class="token parameter variable">-jar</span>  dubbo-integration-consumer.jar
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Run under Windows</span>
<span class="token function">java</span> -javaagent:<span class="token variable">${path}</span><span class="token punctuation">\</span>sermant-agent-x.x.x<span class="token punctuation">\</span>agent<span class="token punctuation">\</span>sermant-agent.jar<span class="token operator">=</span>appName<span class="token operator">=</span>consumer <span class="token parameter variable">-jar</span>  dubbo-integration-consumer.jar
</code></pre></div><ul><li>Refer to the following command to start the dubbo-2-6-integration-provider application.</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Run under Linux</span>
<span class="token function">java</span> -javaagent:<span class="token variable">${path}</span>/sermant-agent-x.x.x/agent/sermant-agent.jar<span class="token operator">=</span>appName<span class="token operator">=</span>provider <span class="token parameter variable">-jar</span> dubbo-integration-provider.jar
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Run under Windows</span>
<span class="token function">java</span> -javaagent:<span class="token variable">${path}</span><span class="token punctuation">\</span>sermant-agent-x.x.x<span class="token punctuation">\</span>agent<span class="token punctuation">\</span>sermant-agent.jar<span class="token operator">=</span>appName<span class="token operator">=</span>provider <span class="token parameter variable">-jar</span> dubbo-integration-provider.jar
</code></pre></div><blockquote><p><strong>illustrate</strong>:
Where path needs to be replaced with the actual installation path of Sermant.
x.x.x represents a Sermant version number.</p></blockquote> <h3 id="verification"><a href="#verification" class="header-anchor">#</a> Verification</h3> <p>Accessing the visibility information query interface<code>http://127.0.0.1:8900/visibility/getcollectorinfo</code>If the collected information can be seen, it indicates that the plugin is effective.</p> <p>The display effect is shown below:</p> <ul><li>Rendering of contract information display</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
 <span class="token property">&quot;contractList &quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token property">&quot;serviceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dubbo&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;interfaceName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;io.sermant.integration.service.BarService&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;serviceKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;io.sermant.integration.service.BarService&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;io.sermant.integration.service.BarService&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;methodInfoList&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
   <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;paramInfoList&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token property">&quot;paramType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;java.lang.String&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paramName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;str&quot;</span>
   <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token property">&quot;returnInfo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;paramType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;java.lang.String&quot;</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
 <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Rendering of blood relationship information display</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
 <span class="token property">&quot;consanguinityList&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token property">&quot;serviceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dubbo&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;interfaceName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;io.sermant.integration.service.BarService&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;io.sermant.integration.service.BarService&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;serviceKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;io.sermant.integration.service.BarService&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;providers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
   <span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;x.x.x.x&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;28821&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;serviceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dubbo&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;serviceKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;io.sermant.integration.service.BarService&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;io.sermant.integration.service.BarService&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
 <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/5/2024, 10:02:22 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/document/plugin/monitor.html" class="prev">
        Monitoring
      </a></span> <span class="next"><a href="/en/document/developer-guide/">
        Create Your First Plugin
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.4d973b6e.js" defer></script><script src="/assets/js/3.5623409f.js" defer></script><script src="/assets/js/1.b15421ba.js" defer></script><script src="/assets/js/55.a28f3ac8.js" defer></script>
  </body>
</html>
